import{E as ce,aH as me,as as ee,r as _,ac as F,w as pe,aP as Pe,o as h,c as C,f as L,aQ as Ce,y as $e,b as e,e as t,av as V,ah as z,aq as P,an as oe,n as d,d as a,ar as k,V as E,am as fe,aR as ge,ap as ve,au as M,aS as A,aT as Ue,I as K,t as w,aU as _e,F as D,aV as ke,_ as te,v as x,aW as qe,ae as I,aX as be,aj as H,i as B,q as Ne,x as ye,J as ie,aI as Ae,M as he,N as Ve,O as ze,$ as ae,a0 as le,aY as X,aZ as Ie,a_ as Le,a$ as De,Q as Te,af as Fe,b0 as ne,b1 as Me,aL as we,ai as Re,al as Ee,b2 as Be,b3 as je,b4 as O,b5 as Z,b6 as Ge,aK as re,p as ue,k as Ye,b7 as Je,b8 as We,b9 as Q,ba as Oe}from"./main-CQxvSPIw.js";const Qe=""+new URL("default-avatar-BE3H5Dke.png",import.meta.url).href,Xe={class:"d-flex flex-column justify-center gap-4"},He={class:"d-flex flex-wrap gap-2"},Ze=a("span",{class:"d-none d-sm-block"},"Upload new photo",-1),Ke=a("p",{class:"text-body-1 mb-0"}," Allowed JPG, JPEG, GIF or PNG. Max size of 1MB ",-1),et={key:0},tt={key:1},at={__name:"AccountSettingsAccount",setup(m){ce(()=>{f(),y()});const l=me(),r=ee(),b=_(!1),s=_({avatar:"",name_first:"",name_last:"",email:"",phone:"",city:"",address:"",zip:""}),c=_({name_first:"",name_last:"",email:"",phone:"",city:"",address:"",zip:""}),i=_(),p=_();async function $(o){var v;if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(o.target.files[0].type)||o.target.files[0].size>1024*1024){r.error("Please upload a valid image file.");return}b.value=!0;const g=new FileReader,{files:u}=o.target;u&&u.length&&(g.readAsDataURL(u[0]),g.onload=()=>{typeof g.result=="string"&&(s.value.avatar=g.result)}),await l.updateUserImage(u[0],(v=l.getUser)==null?void 0:v.uuid),j.value?r.error("Something went wrong. Please try again later."):(await f(),r.success("Image uploaded successfully",{timeout:1e3}))}async function N(){var o;(o=p.value)==null||o.validate().then(async({valid:g})=>{var u,v,n;if(g)try{const q=(u=l.getUser)==null?void 0:u.uuid,R=(v=l.getUser)==null?void 0:v.role,W=(n=l.getUser)==null?void 0:n.state;await l.update({...s.value,uuid:q,role:R,state:W}),j.value?S():r.success("Record updated successfully",{timeout:1e3})}catch(q){r.error("Failed to add member:",q)}})}const f=async()=>{var u;b.value=!0;const g=(u=JSON.parse(localStorage.getItem("user")).user)==null?void 0:u.uuid;await l.show(g),b.value=!1},y=async()=>{var g,u,v,n;let o=l.getUser;s.value.name_first=o==null?void 0:o.name_first,s.value.name_last=o==null?void 0:o.name_last,s.value.email=o==null?void 0:o.email,s.value.phone=(g=o==null?void 0:o.info)==null?void 0:g.phone,s.value.city=(u=o==null?void 0:o.info)==null?void 0:u.city,s.value.address=(v=o==null?void 0:o.info)==null?void 0:v.address,s.value.zip=(n=o==null?void 0:o.info)==null?void 0:n.zip},S=()=>{J.value==500||J.value==404?r.error("Something went wrong. Please try again later."):c.value=j.value},U=o=>`https://darby-dash.sublimelogics.com/storage/${o}`,T=F(()=>l.getLoadStatus),J=F(()=>l.getStatusCode),j=F(()=>l.getErrors),G=F(()=>l.getUser);return pe(()=>l.getUser,()=>{y()},{immediate:!0}),(o,g)=>{const u=ke,v=Pe("mask");return h(),C(D,null,[b.value?(h(),L(Ce,{key:0})):$e("",!0),e(M,null,{default:t(()=>[e(V,{cols:"12"},{default:t(()=>[e(z,{title:"Profile Details"},{default:t(()=>[e(P,{class:"d-flex"},{default:t(()=>{var n,q,R,W;return[(q=(n=G.value)==null?void 0:n.info)!=null&&q.avatar?(h(),L(oe,{key:0,rounded:"",size:"100",class:"me-6",image:U((W=(R=G.value)==null?void 0:R.info)==null?void 0:W.avatar.path)},null,8,["image"])):(h(),L(oe,{key:1,rounded:"",size:"100",class:"me-6",image:d(Qe)},null,8,["image"])),a("form",Xe,[a("div",He,[e(k,{color:"primary",onClick:g[0]||(g[0]=ta=>{var se;return(se=i.value)==null?void 0:se.click()})},{default:t(()=>[e(E,{icon:"tabler-cloud-upload",class:"d-sm-none"}),Ze]),_:1}),a("input",{ref_key:"refInputEl",ref:i,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:$},null,544)]),Ke])]}),_:1}),e(fe),e(P,{class:"pt-2"},{default:t(()=>[e(ge,{ref_key:"updateMemberForm",ref:p,class:"mt-6",onSubmit:ve(N,["prevent"])},{default:t(()=>[e(M,null,{default:t(()=>[e(V,{md:"6",cols:"12"},{default:t(()=>[e(u,{modelValue:s.value.name_first,"onUpdate:modelValue":g[1]||(g[1]=n=>s.value.name_first=n),placeholder:"John",variant:"outlined",label:"First Name *",rules:["requiredValidator"in o?o.requiredValidator:d(A)],"error-messages":c.value.name_first},null,8,["modelValue","rules","error-messages"])]),_:1}),e(V,{md:"6",cols:"12"},{default:t(()=>[e(u,{modelValue:s.value.name_last,"onUpdate:modelValue":g[2]||(g[2]=n=>s.value.name_last=n),placeholder:"Doe",label:"Last Name *",variant:"outlined",rules:["requiredValidator"in o?o.requiredValidator:d(A)],"error-messages":c.value.name_last},null,8,["modelValue","rules","error-messages"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(u,{modelValue:s.value.email,"onUpdate:modelValue":g[3]||(g[3]=n=>s.value.email=n),label:"E-mail",placeholder:"johndoe@gmail.com",type:"email *",variant:"outlined",rules:["requiredValidator"in o?o.requiredValidator:d(A),"emailValidator"in o?o.emailValidator:d(Ue)],"error-messages":c.value.email},null,8,["modelValue","rules","error-messages"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[K(e(u,{modelValue:s.value.phone,"onUpdate:modelValue":g[4]||(g[4]=n=>s.value.phone=n),label:"Phone *",placeholder:"(123) 456-7890",variant:"outlined",rules:["requiredValidator"in o?o.requiredValidator:d(A)],"error-messages":c.value.phone},null,8,["modelValue","rules","error-messages"]),[[v,"(###) ###-####"]])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(u,{modelValue:s.value.address,"onUpdate:modelValue":g[5]||(g[5]=n=>s.value.address=n),label:"Address *",placeholder:"123 Main St, New York, NY 10001",variant:"outlined",rules:["requiredValidator"in o?o.requiredValidator:d(A)],"error-messages":c.value.address},null,8,["modelValue","rules","error-messages"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(u,{modelValue:s.value.city,"onUpdate:modelValue":g[6]||(g[6]=n=>s.value.city=n),label:"City *",placeholder:"New York",rules:["requiredValidator"in o?o.requiredValidator:d(A)],"error-messages":c.value.city},null,8,["modelValue","rules","error-messages"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(u,{modelValue:s.value.zip,"onUpdate:modelValue":g[7]||(g[7]=n=>s.value.zip=n),label:"Zip Code *",placeholder:"10001",variant:"outlined",rules:["requiredValidator"in o?o.requiredValidator:d(A)],"error-messages":c.value.zip},null,8,["modelValue","rules","error-messages"])]),_:1}),e(V,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(k,{type:"submit",disabled:T.value===1,onClick:g[8]||(g[8]=n=>{var q;return(q=o.editMemberForm)==null?void 0:q.validate()})},{default:t(()=>[T.value===1?(h(),C("span",et,[w(" Loading... "),e(_e,{size:20,width:"3",indeterminate:""})])):(h(),C("span",tt," Save "))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}},lt=""+new URL("3d-safe-box-with-golden-dollar-coins-1l8l0kXJ.png",import.meta.url).href,st=""+new URL("3d-space-rocket-with-smoke-DR35GWyq.png",import.meta.url).href,ot=""+new URL("dollar-coins-flying-pink-piggy-bank-C5fySPX-.png",import.meta.url).href,Y=m=>(ae("data-v-3c0ca6df"),m=m(),le(),m),it={class:"text-center"},nt={class:"text-h3 pricing-title mb-2"},rt=Y(()=>a("p",{class:"mb-0"}," All plans include 40+ advanced tools and features to boost your product. ",-1)),ut=Y(()=>a("p",{class:"mb-2"}," Choose the best plan to fit your needs. ",-1)),dt={class:"d-flex font-weight-medium text-body-1 align-center justify-center mx-auto mt-12 mb-6"},ct={class:"position-relative"},mt=Y(()=>a("div",{class:"text-body-1 font-weight-medium"}," Annually ",-1)),pt={class:"save-upto-chip position-absolute align-center d-none d-md-flex gap-1"},ft={class:"text-h4 mb-1 text-center"},gt={class:"mb-0 text-body-1 text-center"},vt={class:"position-relative"},_t={class:"d-flex justify-center pt-5 pb-10"},bt=Y(()=>a("div",{class:"text-body-1 align-self-start font-weight-medium"}," $ ",-1)),yt={class:"text-h1 font-weight-medium text-primary"},ht=Y(()=>a("div",{class:"text-body-1 font-weight-medium align-self-end"}," /month ",-1)),Vt={__name:"AppPricing",props:{title:{type:String,required:!1},xs:{type:[Number,String],required:!1},sm:{type:[Number,String],required:!1},md:{type:[String,Number],required:!1},lg:{type:[String,Number],required:!1},xl:{type:[String,Number],required:!1}},setup(m){const l=m,r=_(!0),b=[{name:"Basic",tagLine:"A simple start for everyone",logo:ot,monthlyPrice:0,yearlyPrice:0,isPopular:!1,current:!0,features:["100 responses a month","Unlimited forms and surveys","Unlimited fields","Basic form creation tools","Up to 2 subdomains"]},{name:"Standard",tagLine:"For small to medium businesses",logo:lt,monthlyPrice:49,yearlyPrice:499,isPopular:!0,current:!1,features:["Unlimited responses","Unlimited forms and surveys","Instagram profile page","Google Docs integration","Custom “Thank you” page"]},{name:"Enterprise",tagLine:"Solution for big organizations",logo:st,monthlyPrice:99,yearlyPrice:999,isPopular:!1,current:!1,features:["PayPal payments","Logic Jumps","File upload with 5GB storage","Custom domain support","Stripe integration"]}];return(s,c)=>(h(),C(D,null,[a("div",it,[a("h3",nt,x(l.title?l.title:"Pricing Plans"),1),rt,ut]),a("div",dt,[e(qe,{for:"pricing-plan-toggle",class:"me-3"},{default:t(()=>[w(" Monthly ")]),_:1}),a("div",ct,[e(be,{id:"pricing-plan-toggle",modelValue:d(r),"onUpdate:modelValue":c[0]||(c[0]=i=>I(r)?r.value=i:null)},{label:t(()=>[mt]),_:1},8,["modelValue"]),a("div",pt,[e(E,{icon:"tabler-corner-left-down",size:"24",class:"flip-in-rtl mt-2 text-disabled"}),e(H,{label:"",color:"primary",size:"small"},{default:t(()=>[w(" Save up to 10% ")]),_:1})])])]),e(M,null,{default:t(()=>[(h(),C(D,null,B(b,i=>e(V,Ne({key:i.logo},l,{cols:"12"}),{default:t(()=>[e(z,{flat:"",border:"",class:ye(i.isPopular?"border-primary border-opacity-100":"")},{default:t(()=>[e(P,{style:{"block-size":"3.75rem"},class:"text-end"},{default:t(()=>[K(e(H,{label:"",color:"primary",size:"small"},{default:t(()=>[w(" Popular ")]),_:2},1536),[[ie,i.isPopular]])]),_:2},1024),e(P,null,{default:t(()=>[e(Ae,{height:120,width:120,src:i.logo,class:"mx-auto mb-5"},null,8,["src"]),a("h4",ft,x(i.name),1),a("p",gt,x(i.tagLine),1),a("div",vt,[a("div",_t,[bt,a("h1",yt,x(d(r)?Math.floor(Number(i.yearlyPrice)/12):i.monthlyPrice),1),ht]),K(a("span",{class:"annual-price-text position-absolute text-caption text-disabled pb-4"},x(i.yearlyPrice===0?"free":`USD ${i.yearlyPrice}/Year`),513),[[ie,d(r)]])]),e(he,{class:"card-list mb-4"},{default:t(()=>[(h(!0),C(D,null,B(i.features,p=>(h(),L(Ve,{key:p},{prepend:t(()=>[e(E,{size:"8",icon:"tabler-circle-filled",color:"rgba(var(--v-theme-on-surface), var(--v-medium-emphasis-opacity))"})]),default:t(()=>[e(ze,{class:"text-body-1"},{default:t(()=>[w(x(p),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024),e(k,{block:"",color:i.current?"success":"primary",variant:i.isPopular?"elevated":"tonal",to:{name:"front-pages-payment"},active:!1},{default:t(()=>[w(x(i.yearlyPrice===0?"Your Current Plan":"Upgrade"),1)]),_:2},1032,["color","variant"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1040)),64))]),_:1})],64))}},wt=te(Vt,[["__scopeId","data-v-3c0ca6df"]]),St={__name:"PricingPlanDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible"],setup(m,{emit:l}){const r=m,b=l,s=c=>{b("update:isDialogVisible",c)};return(c,i)=>{const p=Ie,$=wt;return h(),L(X,{"model-value":r.isDialogVisible,width:c.$vuetify.display.smAndDown?"auto":1200,"onUpdate:modelValue":s},{default:t(()=>[e(p,{onClick:i[0]||(i[0]=N=>c.$emit("update:isDialogVisible",!1))}),e(z,{class:"pricing-dialog pa-2 pa-sm-10"},{default:t(()=>[e(P,null,{default:t(()=>[e($,{md:"4"})]),_:1})]),_:1})]),_:1},8,["model-value","width"])}}},xt=a("span",{class:"text-5xl"},"!",-1),Pt={class:"text-lg font-weight-medium"},Ct={class:"text-h4 mb-4"},$t=a("span",{class:"text-5xl font-weight-light"},"X",-1),Ut={class:"text-h4 mb-4"},kt={__name:"ConfirmDialog",props:{confirmationQuestion:{type:String,required:!0},isDialogVisible:{type:Boolean,required:!0},confirmTitle:{type:String,required:!0},confirmMsg:{type:String,required:!0},cancelTitle:{type:String,required:!0},cancelMsg:{type:String,required:!0}},emits:["update:isDialogVisible","confirm"],setup(m,{emit:l}){const r=m,b=l,s=_(!1),c=_(!1),i=N=>{b("update:isDialogVisible",N)},p=()=>{b("confirm",!0),i(!1),s.value=!0},$=()=>{b("confirm",!1),b("update:isDialogVisible",!1),c.value=!0};return(N,f)=>(h(),C(D,null,[e(X,{"max-width":"500","model-value":r.isDialogVisible,"onUpdate:modelValue":i},{default:t(()=>[e(z,{class:"text-center px-10 py-6"},{default:t(()=>[e(P,null,{default:t(()=>[e(k,{icon:"",variant:"outlined",color:"warning",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[xt]),_:1}),a("h6",Pt,x(r.confirmationQuestion),1)]),_:1}),e(P,{class:"d-flex align-center justify-center gap-2"},{default:t(()=>[e(k,{variant:"elevated",onClick:p},{default:t(()=>[w(" Confirm ")]),_:1}),e(k,{color:"secondary",variant:"tonal",onClick:$},{default:t(()=>[w(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(X,{modelValue:d(s),"onUpdate:modelValue":f[1]||(f[1]=y=>I(s)?s.value=y:null),"max-width":"500"},{default:t(()=>[e(z,null,{default:t(()=>[e(P,{class:"text-center px-10 py-6"},{default:t(()=>[e(k,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[e(E,{icon:"tabler-check",size:"38"})]),_:1}),a("h1",Ct,x(r.confirmTitle),1),a("p",null,x(r.confirmMsg),1),e(k,{color:"success",onClick:f[0]||(f[0]=y=>s.value=!1)},{default:t(()=>[w(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(X,{modelValue:d(c),"onUpdate:modelValue":f[3]||(f[3]=y=>I(c)?c.value=y:null),"max-width":"500"},{default:t(()=>[e(z,null,{default:t(()=>[e(P,{class:"text-center px-10 py-6"},{default:t(()=>[e(k,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[$t]),_:1}),a("h1",Ut,x(r.cancelTitle),1),a("p",null,x(r.cancelMsg),1),e(k,{color:"success",onClick:f[2]||(f[2]=y=>c.value=!1)},{default:t(()=>[w(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},qt=a("div",{class:"mb-6"},[a("h3",{class:"text-base font-weight-medium mb-1"}," Your Current Plan is Basic "),a("p",{class:"text-base"}," A simple start for everyone ")],-1),Nt=a("div",{class:"mb-6"},[a("h3",{class:"text-base font-weight-medium mb-1"}," Active until Dec 09, 2021 "),a("p",{class:"text-base"}," We will send you a notification upon Subscription expiration ")],-1),At={class:"text-base font-weight-medium mb-1"},zt=a("span",{class:"me-3"},"$199 Per Month",-1),It=a("p",{class:"text-base mb-0"}," Standard plan for small to medium businesses ",-1),Lt=a("span",null,"Your plan requires update",-1),Dt={class:"d-flex font-weight-medium text-base mt-4 mb-2"},Tt=a("span",null,"Days",-1),Ft=a("span",null,"24 of 30 Days",-1),Mt=a("p",{class:"text-base mt-2 mb-0"}," 6 days remaining until your plan requires update ",-1),Rt={class:"d-flex flex-wrap gap-y-4"},Et={__name:"AccountSettingsBillingAndPlans",setup(m){_("credit-debit-atm-card");const l=_(!1),r=_(!1);return _(!1),_(!1),_(),_(0x7b5b5282deb5),_("john Doe"),_("05/24"),_(420),(b,s)=>{const c=kt,i=St;return h(),L(M,null,{default:t(()=>[e(V,{cols:"12"},{default:t(()=>[e(z,{title:"Current Plan"},{default:t(()=>[e(P,null,{default:t(()=>[e(M,null,{default:t(()=>[e(V,{cols:"12",md:"6"},{default:t(()=>[a("div",null,[qt,Nt,a("div",null,[a("h3",At,[zt,e(H,{color:"primary",size:"small",label:""},{default:t(()=>[w(" Popular ")]),_:1})]),It])])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(Le,{color:"warning",variant:"tonal"},{default:t(()=>[e(De,{class:"mb-1"},{default:t(()=>[w(" We need your attention! ")]),_:1}),Lt]),_:1}),a("h6",Dt,[Tt,e(Te),Ft]),e(Fe,{color:"primary",rounded:"",height:"12","model-value":"75"}),Mt]),_:1}),e(V,{cols:"12"},{default:t(()=>[a("div",Rt,[e(k,{class:"me-3",onClick:s[0]||(s[0]=p=>l.value=!0)},{default:t(()=>[w(" upgrade plan ")]),_:1}),e(k,{color:"secondary",variant:"tonal",onClick:s[1]||(s[1]=p=>r.value=!0)},{default:t(()=>[w(" Cancel Subscription ")]),_:1})])]),_:1})]),_:1}),e(c,{isDialogVisible:d(r),"onUpdate:isDialogVisible":s[2]||(s[2]=p=>I(r)?r.value=p:null),"confirmation-question":"Are you sure to cancel your subscription?","cancel-msg":"Unsubscription Cancelled!!","cancel-title":"Cancelled","confirm-msg":"Your subscription cancelled successfully.","confirm-title":"Unsubscribed!"},null,8,["isDialogVisible"]),e(i,{"is-dialog-visible":d(l),"onUpdate:isDialogVisible":s[3]||(s[3]=p=>I(l)?l.value=p:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1})]),_:1})]),_:1})}}},de={getNotificationSettings(){return ne.get("admin/settings/notifications")},updateNotificationSetting(m,l){return ne.patch(`admin/settings/notifications/${m}/update`,l)}},Bt=Me("user_settings",{state:()=>({notificationSettings:[],loadStatus:0,error:null}),persist:!0,actions:{async getAllNotifications(){this.error=null,this.loadStatus=1;try{const m=await de.getNotificationSettings();this.notificationSettings=m.data.data,this.loadStatus=2}catch(m){this.error=m,this.loadStatus=3,console.error("getSettings error ",m)}},async updateNotificationSetting(m,l){this.error=null,this.loadStatus=1;try{const r=await de.updateNotificationSetting(m,l);this.loadStatus=2}catch(r){this.error=r,this.loadStatus=3,console.error("updateNotificationSetting error ",r)}}},getters:{getLoadStatus:m=>m.loadStatus,getNotificationSettings:m=>m.notificationSettings,getErrors:m=>m.error}}),Se=m=>(ae("data-v-0d84775c"),m=m(),le(),m),jt=Se(()=>a("p",{class:"text-sm mt-2 mb-0"}," Manage your preferences for receiving notifications and alerts. ",-1)),Gt={class:"d-flex flex-wrap gap-1 mb-4"},Yt=Se(()=>a("thead",null,[a("tr",null,[a("th",{style:{width:"65%"}}," Notification Type "),a("th",{style:{width:"35%"}}," Deliverable Channel ")])],-1)),Jt={class:"d-flex align-items-center"},Wt={__name:"AccountSettingsNotification",setup(m){const l=ee(),r=Bt(),b=_([]),s=_(null),c=F(()=>r.getNotificationSettings),i=async()=>{try{await r.getAllNotifications();const f=c.value;f&&Object.keys(f).length>0?(b.value=Object.keys(f).map(y=>({title:p(y),notifications:f[y].map(S=>({id:S.id,type:S.type,deliverableChannel:S.deliverableChannel}))})),s.value=b.value[0]):l.error("No settings available.")}catch(f){l.error(`Error fetching settings: ${f.message}`)}},p=f=>f.charAt(0).toUpperCase()+f.slice(1),$=f=>{const{id:y,deliverableChannel:S}=f;y&&S!==void 0?r.updateNotificationSetting(y,{deliverable_channel:S}).then(()=>{l.success("Notification channel updated successfully.")}).catch(U=>{l.error(`Error updating notification channel: ${U.message}`)}):l.error("Invalid notification data.")},N=f=>{s.value=b.value.find(y=>y.title===f)||b.value[0]};return we(i),(f,y)=>(h(),L(z,null,{default:t(()=>[e(Re,null,{default:t(()=>[e(Ee,null,{default:t(()=>[w("Notification Settings")]),_:1}),jt]),_:1}),e(P,null,{default:t(()=>[a("div",Gt,[(h(!0),C(D,null,B(b.value,S=>{var U;return h(),L(H,{key:S.title,class:ye([{"v-chip--active":((U=s.value)==null?void 0:U.title)===S.title},"cursor-pointer"]),color:"primary",onClick:T=>N(S.title)},{default:t(()=>[w(x(S.title)+" Alerts ",1)]),_:2},1032,["class","onClick"])}),128))]),e(Be,{class:"text-no-wrap mt-4",density:"compact",style:{border:"1px solid #e0e0e0"}},{default:t(()=>{var S;return[Yt,a("tbody",null,[(h(!0),C(D,null,B((S=s.value)==null?void 0:S.notifications,U=>(h(),C("tr",{key:U.type},[a("td",null,x(U.type),1),a("td",null,[a("div",Jt,[e(je,{modelValue:U.deliverableChannel,"onUpdate:modelValue":T=>U.deliverableChannel=T,inline:"",onChange:T=>$(U)},{default:t(()=>[e(O,{label:"Email",value:"mail",class:"me-2",density:"compact"}),e(O,{label:"Push",value:"database",class:"me-2",density:"compact"}),e(O,{label:"Both",value:"both",class:"me-2",density:"compact"}),e(O,{label:"None",value:"null",density:"compact"})]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])])]))),128))])]}),_:1})]),_:1}),e(fe)]),_:1}))}},Ot=te(Wt,[["__scopeId","data-v-0d84775c"]]),xe=m=>(ae("data-v-57e900d7"),m=m(),le(),m),Qt=xe(()=>a("h6",{class:"text-base font-weight-medium mb-3"}," Password Requirements: ",-1)),Xt={key:0},Ht={key:1},Zt=xe(()=>a("p",null,[w(" Two-factor authentication adds an additional layer of security to your account by requiring more than just a password to log in. "),a("a",{href:"javascript:void(0)",class:"text-decoration-none"},"Learn more.")],-1)),Kt={__name:"AccountSettingsSecurity",setup(m){const l=me(),r=ee(),b=_(!1),s=_(!1),c=_(!1),i=_(""),p=_(""),$=_(""),N=_(null),f=_(0),y=_({current_password:null,new_password:null,confirm_password:null}),S=["Minimum 8 characters long - the more, the better","At least one lowercase character","Password and confirm password should match"];ce(async()=>{var u,v;await l.show((u=l.getUser)==null?void 0:u.uuid),f.value=(v=l.getUser)==null?void 0:v.is_2fa});async function U(){var u;(u=N.value)==null||u.validate().then(async({valid:v})=>{var n;if(v){j();const q=(n=l.getUser)==null?void 0:n.uuid,R={current_password:i.value,new_password:p.value,confirm_password:$.value};await l.updatePassword(q,R),G.value?J():r.success("Password changed successfully")}})}const T=async()=>{var n;const u=(n=l.getUser)==null?void 0:n.uuid,v={isEnable:f.value};await l.updateTwoFactor(u,v),r.success(f.value?"Two-Factor authentication enabled":"Two-Factor authentication disabled")},J=()=>{g===500?r.error("Something went wrong. Please try again later."):y.value=G.value},j=()=>{for(const u in y.value)y.value[u]=null},G=F(()=>l.getErrors),o=F(()=>l.getLoadStatus),g=F(()=>l.getStatusCode);return(u,v)=>(h(),L(M,null,{default:t(()=>[e(V,{cols:"7"},{default:t(()=>[e(z,{title:"Change Password"},{default:t(()=>[e(ge,{ref_key:"passRefForm",ref:N,onSubmit:ve(U,["prevent"])},{default:t(()=>[e(P,{class:"pt-0"},{default:t(()=>[e(M,null,{default:t(()=>[e(V,{cols:"12",md:"12"},{default:t(()=>[e(Z,{modelValue:d(i),"onUpdate:modelValue":v[0]||(v[0]=n=>I(i)?i.value=n:null),variant:"outlined",type:d(b)?"text":"password","append-inner-icon":d(b)?"tabler-eye-off":"tabler-eye",label:"Current Password",autocomplete:"on",placeholder:"············",rules:["requiredValidator"in u?u.requiredValidator:d(A)],"error-messages":d(y).current_password,"onClick:appendInner":v[1]||(v[1]=n=>b.value=!d(b))},null,8,["modelValue","type","append-inner-icon","rules","error-messages"])]),_:1})]),_:1}),e(M,null,{default:t(()=>[e(V,{cols:"12",md:"6"},{default:t(()=>[e(Z,{modelValue:d(p),"onUpdate:modelValue":v[2]||(v[2]=n=>I(p)?p.value=n:null),type:d(s)?"text":"password",variant:"outlined","append-inner-icon":d(s)?"tabler-eye-off":"tabler-eye",label:"New Password",autocomplete:"on",placeholder:"············",rules:["requiredValidator"in u?u.requiredValidator:d(A)],"error-messages":d(y).new_password,"onClick:appendInner":v[3]||(v[3]=n=>s.value=!d(s))},null,8,["modelValue","type","append-inner-icon","rules","error-messages"])]),_:1}),e(V,{cols:"12",md:"6"},{default:t(()=>[e(Z,{modelValue:d($),"onUpdate:modelValue":v[4]||(v[4]=n=>I($)?$.value=n:null),type:d(c)?"text":"password",variant:"outlined","append-inner-icon":d(c)?"tabler-eye-off":"tabler-eye",label:"Confirm New Password",autocomplete:"on",placeholder:"············",rules:["requiredValidator"in u?u.requiredValidator:d(A),("confirmedValidator"in u?u.confirmedValidator:d(Ge))(d($),d(p))],"error-messages":d(y).confirm_password,"onClick:appendInner":v[5]||(v[5]=n=>c.value=!d(c))},null,8,["modelValue","type","append-inner-icon","rules","error-messages"])]),_:1})]),_:1})]),_:1}),e(P,null,{default:t(()=>[Qt,e(he,{class:"card-list"},{default:t(()=>[(h(),C(D,null,B(S,n=>e(Ve,{key:n,title:n,class:"text-medium-emphasis"},{prepend:t(()=>[e(E,{size:"8",icon:"tabler-circle",class:"me-3"})]),_:2},1032,["title"])),64))]),_:1})]),_:1}),e(P,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(k,{type:"submit",disabled:d(o)===1},{default:t(()=>[d(o)===1?(h(),C("span",Xt,[w(" Loading... "),e(_e,{size:20,width:"3",indeterminate:""})])):(h(),C("span",Ht," Save "))]),_:1},8,["disabled"])]),_:1})]),_:1},512)]),_:1})]),_:1}),e(V,{cols:"5"},{default:t(()=>[e(z,{title:"Two-Factor Authentication"},{default:t(()=>[e(P,null,{default:t(()=>[Zt,e(be,{modelValue:d(f),"onUpdate:modelValue":v[6]||(v[6]=n=>I(f)?f.value=n:null),color:"primary","true-value":1,"false-value":0,onChange:T},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}))}},ea=te(Kt,[["__scopeId","data-v-57e900d7"]]),la={__name:"account-setting",setup(m){re({title:`${ue.app.title} | Account`}),we(()=>{const i=new URLSearchParams(window.location.search).get("tab");i&&["account","security","billing-plans","notifications"].includes(i)&&s(i)});const l=_("account"),r=Ye(),b=[{title:"Account",icon:"tabler-users",tab:"account"},{title:"Security",icon:"tabler-lock",tab:"security"},{title:"Billing & Plans",icon:"tabler-file-text",tab:"billing-plans"},{title:"Notifications",icon:"tabler-bell",tab:"notifications"}];function s(c){l.value=c}return pe(l,c=>{r.push({query:{tab:c}}),re({title:`${ue.app.title} | ${b.find(i=>i.tab===c).title}`})}),(c,i)=>(h(),C("div",null,[e(We,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=p=>l.value=p),class:"v-tabs-pill"},{default:t(()=>[(h(),C(D,null,B(b,p=>e(Je,{key:p.icon,value:p.tab,onClick:$=>s(p.tab)},{default:t(()=>[e(E,{size:"20",start:"",icon:p.icon},null,8,["icon"]),w(" "+x(p.title),1)]),_:2},1032,["value","onClick"])),64))]),_:1},8,["modelValue"]),e(Oe,{modelValue:l.value,"onUpdate:modelValue":i[1]||(i[1]=p=>l.value=p),class:"mt-6 disable-tab-transition",touch:!1},{default:t(()=>[e(Q,{value:"account"},{default:t(()=>[e(at)]),_:1}),e(Q,{value:"security"},{default:t(()=>[e(ea)]),_:1}),e(Q,{value:"billing-plans"},{default:t(()=>[e(Et)]),_:1}),e(Q,{value:"notifications"},{default:t(()=>[e(Ot)]),_:1})]),_:1},8,["modelValue"])]))}};export{la as default};
