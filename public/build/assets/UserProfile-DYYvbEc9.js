import{aA as z,aB as F,aC as O,aD as R,aE as $,b as e,E as G,aF as H,a9 as J,k as j,ac as q,o as u,f as p,e as t,an as w,n as s,aG as C,c as P,v as f,L as K,M as Q,N as g,ag as D,O as h,t as _,aH as W,am as X,V as N}from"./main-BhQpCXzL.js";const Y=z({start:Boolean,end:Boolean,...F(),...O()},"VListItemAction"),Z=R()({name:"VListItemAction",props:Y(),setup(r,m){let{slots:d}=m;return $(()=>e(r.tag,{class:["v-list-item-action",{"v-list-item-action--start":r.start,"v-list-item-action--end":r.end},r.class],style:r.style},d)),{}}}),tt={key:1},et={key:1},st={__name:"UserProfile",setup(r){G(()=>{T()});const m=H(),d=J(),E=j();async function M(){let l=d.token,n=await d.logout(l);n.success?E.push({name:"login"}):alert(n.data.error)}const T=async()=>{var c;const n=(c=JSON.parse(localStorage.getItem("user")).user)==null?void 0:c.uuid;await m.show(n)},V=l=>`https://darby-dash.sublimelogics.com/storage/${l}`,a=q(()=>m.getUser);return(l,n)=>(u(),p(D,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",bordered:"",color:"success"},{default:t(()=>[e(w,{class:"cursor-pointer",color:"primary",variant:"tonal"},{default:t(()=>{var c,y,k,b,v,A,I;return[(k=(y=(c=s(a))==null?void 0:c.info)==null?void 0:y.avatar)!=null&&k.path?(u(),p(C,{key:0,src:V((v=(b=s(a))==null?void 0:b.info)==null?void 0:v.avatar.path)},null,8,["src"])):(u(),P("span",tt,f(((A=s(a))==null?void 0:A.name_first.charAt(0))+((I=s(a))==null?void 0:I.name_last.charAt(0))),1)),e(K,{activator:"parent",width:"230",location:"bottom end",offset:"14px"},{default:t(()=>[e(Q,null,{default:t(()=>[e(g,null,{prepend:t(()=>[e(Z,{start:""},{default:t(()=>[e(D,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success"},{default:t(()=>[e(w,{color:"primary",variant:"tonal"},{default:t(()=>{var o,i,L,S,x,B,U;return[(L=(i=(o=s(a))==null?void 0:o.info)==null?void 0:i.avatar)!=null&&L.path?(u(),p(C,{key:0,src:V((x=(S=s(a))==null?void 0:S.info)==null?void 0:x.avatar.path)},null,8,["src"])):(u(),P("span",et,f(((B=s(a))==null?void 0:B.name_first.charAt(0))+((U=s(a))==null?void 0:U.name_last.charAt(0))),1))]}),_:1})]),_:1})]),_:1})]),default:t(()=>[e(h,{class:"font-weight-semibold"},{default:t(()=>{var o,i;return[_(f(((o=s(a))==null?void 0:o.name_first)+" "+((i=s(a))==null?void 0:i.name_last)),1)]}),_:1}),e(W,null,{default:t(()=>{var o;return[_(f((o=s(a))==null?void 0:o.role),1)]}),_:1})]),_:1}),e(X,{class:"my-2"}),e(g,{to:"/account-setting"},{prepend:t(()=>[e(N,{class:"me-2",icon:"tabler-user",size:"22"})]),default:t(()=>[e(h,null,{default:t(()=>[_("Profile")]),_:1})]),_:1}),e(g,{onClick:M},{prepend:t(()=>[e(N,{class:"me-2",icon:"tabler-logout",size:"22"})]),default:t(()=>[e(h,null,{default:t(()=>[_("Logout")]),_:1})]),_:1})]),_:1})]),_:1})]}),_:1})]),_:1}))}};export{st as default};
