import{_ as fe}from"./AppLoadingIndicator-BO2yRfLV.js";import{_ as K,R as oe,U as C,T as re,r as A,W as he,X as ye,Y as le,l as W,j as z,w as B,a as H,o,f as v,e as n,d as h,z as J,b as l,n as e,c as V,v as $,p as f,Z as be,$ as ke,I as M,h as _,q as S,J as L,P as ce,y as T,a0 as _e,F as Q,i as X,x as j,a1 as ue,a2 as de,k as xe,a3 as Ne,m as ee,a4 as O,a5 as $e,s as F,t as I,a6 as ve,a7 as Ce,a8 as Ve,a9 as U,aa as we,ab as Se,A as je,B as Ie,ac as pe,ad as Ae,E as Te,ae as Re,V as te,af as Me,L as Le,M as Oe,N as ae,O as ne,ag as Be,Q as Pe,S as Ee}from"./main-U7HRGA3B.js";import{c as Ge,a as me}from"./casl-S-yymCX1.js";import qe from"./NavbarThemeSwitcher-Bb_zcspu.js";import De from"./NavBarNotifications-C4-nTLam.js";import Fe from"./UserProfile-DX0pKGij.js";const We=oe({name:"TransitionExpand",setup(t,{slots:s}){const g=a=>{const i=getComputedStyle(a).width;a.style.width=i,a.style.position="absolute",a.style.visibility="hidden",a.style.height="auto";const y=getComputedStyle(a).height;a.style.width="",a.style.position="",a.style.visibility="",a.style.height="0px",getComputedStyle(a).height,requestAnimationFrame(()=>{a.style.height=y})},c=a=>{a.style.height="auto"},p=a=>{const i=getComputedStyle(a).height;a.style.height=i,getComputedStyle(a).height,requestAnimationFrame(()=>{a.style.height="0px"})};return()=>C(C(re),{name:"expand",onEnter:g,onAfterEnter:c,onLeave:p},()=>{var a;return(a=s.default)==null?void 0:a.call(s)})}}),He=K(We,[["__scopeId","data-v-22ff91fc"]]),Ue=t=>(ue("data-v-4baa461d"),t=t(),de(),t),ze={class:"nav-header"},Ye={key:0,class:"app-title text-h4 text-primary text-truncate",style:{"max-width":"200px"}},Je=Ue(()=>h("div",{class:"vertical-nav-items-shadow"},null,-1)),Ke={__name:"VerticalNav",props:{tag:{type:null,required:!1,default:"aside"},navItems:{type:null,required:!0},isOverlayNavActive:{type:Boolean,required:!0},toggleIsOverlayNavActive:{type:Function,required:!0}},setup(t){const s=t,g=A(),c=he(g);ye(le,c);const p=W(),a=u=>"heading"in u?nt:"children"in u?Ze:ge,i=z();B(()=>i.name,()=>{s.toggleIsOverlayNavActive(!1)});const y=A(!1),x=u=>y.value=u,b=u=>{y.value=u.target.scrollTop>0},w=p.isVerticalNavMini(c);return(u,d)=>{const r=H("RouterLink");return o(),v(_(s.tag),{ref_key:"refNav",ref:g,class:j(["layout-vertical-nav pt-3",[{"overlay-nav":e(p).isLessThanOverlayNavBreakpoint,hovered:e(c),visible:t.isOverlayNavActive,scrolled:e(y)}]])},{default:n(()=>[h("div",ze,[J(u.$slots,"nav-header",{},()=>[l(r,{to:"/",class:"app-logo app-title-wrapper"},{default:n(()=>[e(w)?(o(),v(be,{key:1,color:"primary",variant:"tonal",class:"app-title-short",size:"40"},{default:n(()=>[h("span",null,$(("avatarText"in u?u.avatarText:e(ke))(e(f).app.title)),1)]),_:1})):(o(),V("span",Ye,$(e(f).app.title),1))]),_:1}),M((o(),v(_(e(f).app.iconRenderer||"div"),S({class:["header-action d-none nav-unpin",e(p).isVerticalNavCollapsed&&"d-lg-block"]},e(f).icons.verticalNavUnPinned,{onClick:d[0]||(d[0]=m=>e(p).isVerticalNavCollapsed=!e(p).isVerticalNavCollapsed)}),null,16,["class"])),[[L,e(p).isVerticalNavCollapsed]]),M((o(),v(_(e(f).app.iconRenderer||"div"),S({class:["header-action d-none nav-pin",!e(p).isVerticalNavCollapsed&&"d-lg-block"]},e(f).icons.verticalNavPinned,{onClick:d[1]||(d[1]=m=>e(p).isVerticalNavCollapsed=!e(p).isVerticalNavCollapsed)}),null,16,["class"])),[[L,!e(p).isVerticalNavCollapsed]]),(o(),v(_(e(f).app.iconRenderer||"div"),S({class:"header-action d-lg-none"},e(f).icons.close,{onClick:d[2]||(d[2]=m=>t.toggleIsOverlayNavActive(!1))}),null,16))],!0)]),J(u.$slots,"before-nav-items",{},()=>[Je],!0),l(r,{to:"/",class:"bottom-logo"},{default:n(()=>[e(w)?T("",!0):(o(),v(e(ce),{key:0,nodes:e(f).app.watermarkLogo},null,8,["nodes"]))]),_:1}),J(u.$slots,"nav-items",{updateIsVerticalNavScrolled:x},()=>[(o(),v(e(_e),{key:e(p).isAppRTL,tag:"ul",class:"nav-items",options:{wheelPropagation:!1},onPsScrollY:b},{default:n(()=>[(o(!0),V(Q,null,X(t.navItems,(m,P)=>(o(),v(_(a(m)),{key:P,item:m},null,8,["item"]))),128))]),_:1}))],!0)]),_:3},8,["class"])}}},Qe=K(Ke,[["__scopeId","data-v-4baa461d"]]),Xe={class:"nav-group-children"},Ze=Object.assign({name:"VerticalNavGroup"},{__name:"VerticalNavGroup",props:{item:{type:null,required:!0}},setup(t){const s=t,g=z(),c=xe(),p=W(),a=p.isVerticalNavMini(),i=Ne(le,A(!1)),y=A(!1),x=A(!1),b=d=>d.some(r=>{let m=O.value.includes(r.title);return"children"in r&&(m=b(r.children)||m),m}),w=d=>{d.forEach(r=>{"children"in r&&w(r.children),O.value=O.value.filter(m=>m!==r.title)})};B(()=>g.path,()=>{const d=ee(s.item.children,c);x.value=d&&!p.isVerticalNavMini(i).value,y.value=d},{immediate:!0}),B(x,d=>{const r=O.value.indexOf(s.item.title);d&&r===-1?O.value.push(s.item.title):!d&&r!==-1&&(O.value.splice(r,1),w(s.item.children))},{immediate:!0}),B(O,d=>{if(d.at(-1)===s.item.title)return;const m=ee(s.item.children,c);m||b(s.item.children)||(x.value=m,y.value=m)},{deep:!0}),B(p.isVerticalNavMini(i),d=>{x.value=d?!1:y.value});const u=$e();return(d,r)=>e(Ge)(t.item)?(o(),V("li",{key:0,class:j(["nav-group",[{active:e(y),open:e(x),disabled:t.item.disable}]])},[h("div",{class:"nav-group-label",onClick:r[0]||(r[0]=m=>x.value=!e(x))},[(o(),v(_(e(f).app.iconRenderer||"div"),S(t.item.icon||e(f).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),(o(),v(_(e(u)?ve:"div"),S({name:"transition-slide-x"},e(u)?void 0:{class:"d-flex align-center flex-grow-1"}),{default:n(()=>[M((o(),v(_(e(f).app.i18n.enable?"i18n-t":"span"),S(e(F)(t.item.title,"span"),{key:"title",class:"nav-item-title"}),{default:n(()=>[I($(t.item.title),1)]),_:1},16)),[[L,!e(a)]]),t.item.badgeContent?M((o(),v(_(e(f).app.i18n.enable?"i18n-t":"span"),S({key:0},e(F)(t.item.badgeContent,"span"),{key:"badge",class:["nav-item-badge",t.item.badgeClass]}),{default:n(()=>[I($(t.item.badgeContent),1)]),_:1},16,["class"])),[[L,!e(a)]]):T("",!0),M((o(),v(_(e(f).app.iconRenderer||"div"),S(e(f).icons.chevronRight,{key:"arrow",class:"nav-group-arrow"}),null,16)),[[L,!e(a)]])]),_:1},16))]),l(e(He),null,{default:n(()=>[M(h("ul",Xe,[(o(!0),V(Q,null,X(t.item.children,m=>(o(),v(_("children"in m?"VerticalNavGroup":e(ge)),{key:m.title,item:m},null,8,["item"]))),128))],512),[[L,e(x)]])]),_:1})],2)):T("",!0)}}),et=oe({props:{navItems:{type:Array,required:!0},verticalNavAttrs:{type:Object,default:()=>({})}},setup(t,{slots:s}){const{width:g}=Ce(),c=W(),p=A(!1),a=A(!1),i=Ve(p),y=z(),x=U(()=>{const b=y.matched.some(u=>u.path.startsWith("/projects")),w=y.params.id;return b&&!!w});return we(p,a),B(g,()=>{!c.isLessThanOverlayNavBreakpoint&&a.value&&(a.value=!1)}),()=>{var E,G,q,Z;const b=Se(t,"verticalNavAttrs"),{wrapper:w,wrapperProps:u,...d}=b.value,r=C(Qe,{isOverlayNavActive:p.value,toggleIsOverlayNavActive:i,navItems:t.navItems,...d},{"nav-header":()=>{var D;return(D=s["vertical-nav-header"])==null?void 0:D.call(s)},"before-nav-items":()=>{var D;return(D=s["before-vertical-nav-items"])==null?void 0:D.call(s)}}),m=C("header",{class:["layout-navbar","logo-navbar",{"navbar-blur":c.isNavbarBlurEnabled}]},[C("div",{class:["navbar-content-container","logo-navbar-content-container"]},(E=s.logoNavbar)==null?void 0:E.call(s,{toggleVerticalOverlayNavActive:i}))]),P=x.value?C("header",{class:["layout-navbar","project-navbar"],style:{top:"70px !important"}},[C("div",{class:"navbar-content-container"},(G=s.navbar)==null?void 0:G.call(s))]):null,R=C("main",{class:"layout-page-content"},C("div",{class:"page-content-container"},(q=s.default)==null?void 0:q.call(s))),N=C("footer",{class:"layout-footer"},[C("div",{class:"footer-content-container"},(Z=s.footer)==null?void 0:Z.call(s))]),k=C("div",{class:["layout-overlay",{visible:a.value}],onClick:()=>{a.value=!a.value}});return C("div",{class:["layout-wrapper",...c._layoutClasses]},[w?C(w,u,{default:()=>r}):r,C("div",{class:"layout-content-wrapper"},[m,P,R,N]),k])}}}),ge={__name:"VerticalNavLink",props:{item:{type:null,required:!0}},setup(t){const g=W().isVerticalNavMini();return(c,p)=>e(me)(t.item.action,t.item.subject)?(o(),V("li",{key:0,class:j(["nav-link",{disabled:t.item.disable}])},[(o(),v(_(t.item.to?"RouterLink":"a"),S(e(Ie)(t.item),{class:{"router-link-active router-link-exact-active":e(je)(t.item,c.$router)||t.item.to.name==="web-designs-list"&&["web-design","team","milestones","calendar","files","chat","add-project-tasks","marketplace-services","marketplace-service-detail","bucks-setting"].includes(c.$router.currentRoute.value.name)}}),{default:n(()=>[(o(),v(_(e(f).app.iconRenderer||"div"),S(t.item.icon||e(f).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),l(ve,{name:"transition-slide-x"},{default:n(()=>[M((o(),v(_(e(f).app.i18n.enable?"i18n-t":"span"),S({key:"title",class:"nav-item-title"},e(F)(t.item.title,"span")),{default:n(()=>[I($(t.item.title),1)]),_:1},16)),[[L,!e(g)]]),t.item.badgeContent?M((o(),v(_(e(f).app.i18n.enable?"i18n-t":"span"),S({key:"badge",class:["nav-item-badge",t.item.badgeClass]},e(F)(t.item.badgeContent,"span")),{default:n(()=>[I($(t.item.badgeContent),1)]),_:1},16,["class"])),[[L,!e(g)]]):T("",!0)]),_:1})]),_:1},16,["class"]))],2)):T("",!0)}},tt={key:0,class:"nav-section-title"},at={class:"title-wrapper"},nt={__name:"VerticalNavSectionTitle",props:{item:{type:null,required:!0}},setup(t){const g=W().isVerticalNavMini();return(c,p)=>e(me)(t.item.action,t.item.subject)?(o(),V("li",tt,[h("div",at,[l(re,{name:"vertical-nav-section-title",mode:"out-in"},{default:n(()=>[(o(),v(_(e(g)?e(f).app.iconRenderer:e(f).app.i18n.enable?"i18n-t":"span"),S({key:e(g),class:e(g)?"placeholder-icon":"title-text"},{...e(f).icons.sectionTitlePlaceholder,...e(F)(t.item.heading,"span")}),{default:n(()=>[I($(e(g)?null:t.item.heading),1)]),_:1},16,["class"]))]),_:1})])])):T("",!0)}},Y=pe(),se=Y.isAdmin,st=Y.isSuperAdmin,ie=Y.getCompanyUuid,it=Y.isTenant??!1,ot=[ie&&it&&{title:"Company Setting",to:{name:"manage-company-settings",params:{id:ie}}},{title:"Manage Roles",to:"roles-setting"},{title:"Manage Templates",to:"templates-setting"},{title:"Manage Services",to:"services-setting"}].filter(Boolean),rt=[{title:"Home",to:{name:"root"},icon:{icon:"tabler-align-box-bottom-center"}},!st&&{title:"Projects",icon:{icon:"tabler-chart-histogram"},to:{name:"web-designs-list"}},se&&{title:"Members",icon:{icon:"tabler-users"},to:{name:"members-list"}},se&&{title:"Settings",icon:{icon:"tabler-settings"},children:ot}].filter(Boolean),lt=t=>(ue("data-v-83649765"),t=t(),de(),t),ct={class:"d-flex h-100 align-center"},ut={class:"d-flex h-100 align-center"},dt={key:0},vt={class:"text-primary"},pt={key:1},mt={class:"text-primary"},gt={key:1,class:"d-none d-lg-flex align-center"},ft=lt(()=>h("span",{class:"inner-badge-text"},"Inbox",-1)),ht={key:1},yt={key:2,class:"text-h6 font-weight-bold me-4 d-none d-lg-flex"},bt={key:0},kt={class:"text-primary"},_t={key:1},xt={class:"text-primary"},Nt={__name:"DefaultLayoutWithVerticalNav",setup(t){const s=A(!1),g=A(null),c=z(),p=Ae(),a=pe(),i=A(null);A(null),Te(async()=>{await a.tenantInfo()});const y=U(()=>a.getGeneralSetting);Re(()=>{i.value=c.params.id}),B([s,g],()=>{s.value&&g.value&&g.value.fallbackHandle(),!s.value&&g.value&&g.value.resolveHandle()},{immediate:!0});const x=U(()=>{const w=c.name==="manage-templates",u=c.name==="manage-company-settings";return!(w||u)&&c.params.id!==void 0}),b=U(()=>p.getProject);return(w,u)=>{const d=H("IconBtn"),r=H("RouterLink"),m=fe,P=H("RouterView");return o(),v(e(et),{"nav-items":e(rt)},{logoNavbar:n(({toggleVerticalOverlayNavActive:R})=>[h("div",ct,[l(d,{id:"vertical-nav-toggle-btn",class:"ms-n3 d-lg-none",onClick:N=>R(!0)},{default:n(()=>[l(te,{size:"26",icon:"tabler-menu-2"})]),_:2},1032,["onClick"]),l(r,{to:"/",class:"app-logo app-title-wrapper"},{default:n(()=>[l(e(ce),{nodes:e(f).app.logo},null,8,["nodes"])]),_:1}),l(qe),l(De,{class:"me-2"}),l(Fe)])]),navbar:n(()=>{var R;return[h("div",ut,[e(x)?(o(),v(d,{key:0,class:"ms-n1 d-lg-none",onClick:u[0]||(u[0]=Me(()=>{},["prevent"]))},{default:n(()=>[l(te,{size:"26",icon:"tabler-dots-vertical"}),l(Le,{activator:"parent",class:"d-lg-none","offset-y":""},{default:n(()=>[l(Oe,null,{default:n(()=>{var N;return[(o(!0),V(Q,null,X([{text:"Overview",route:`/projects/web-designs/${e(i)}`},{text:"Tasks",route:`/projects/${e(i)}/tasks/add`},{text:"Milestones",route:`/projects/${e(i)}/milestones`},{text:"Calendar",route:`/projects/${e(i)}/calendar`},{text:"Files",route:`/projects/${e(i)}/files`},{text:"Inbox",route:`/projects/${e(i)}/chat`},{text:"Your Team",route:`/projects/${e(i)}/team`},{text:"Marketplace",route:`/projects/${e(i)}/marketplace`}],k=>(o(),v(ae,{key:k.text},{default:n(()=>[l(r,{to:k.route},{default:n(()=>[l(ne,null,{default:n(()=>[I($(k.text),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128)),(N=e(b))!=null&&N.bucks_share?(o(),v(ae,{key:0},{default:n(()=>[l(r,{to:e(a).isAdmin||e(a).isManager?`/projects/${e(i)}/bucks`:`/projects/${e(i)}/bucks?tab=manage-bucks`},{default:n(()=>[l(ne,null,{default:n(()=>{var k,E,G,q;return[e(a).isAdmin||e(a).isManager?(o(),V("span",dt,[I($(((k=e(y))==null?void 0:k.bucks_label)||"Darby Bucks")+" ",1),h("span",vt,"$"+$((E=e(b))==null?void 0:E.bucks_share_amount),1)])):(o(),V("span",pt,[I(" Earned "+$(((G=e(y))==null?void 0:G.bucks_label)||"Darby Bucks")+" ",1),h("span",mt,"$"+$((q=e(b))==null?void 0:q.bucks_earnings),1)]))]}),_:1})]),_:1},8,["to"])]),_:1})):T("",!0)]}),_:1})]),_:1})]),_:1})):T("",!0),e(x)?(o(),V("div",gt,[l(r,{to:`/projects/web-designs/${e(i)}`},{default:n(()=>[h("span",{class:j(["text-h6 ms-3 me-5 inner-badge-text",{"text-primary":e(c).path===`/projects/web-designs/${e(i)}`}])},"Overview",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/tasks/add`},{default:n(()=>[h("span",{class:j(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/tasks/add`}])}," Tasks ",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/milestones`,class:j(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/milestones`}])},{default:n(()=>[I(" Milestones ")]),_:1},8,["to","class"]),l(r,{to:`/projects/${e(i)}/calendar`},{default:n(()=>[h("span",{class:j(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/calendar`}])},"Calendar",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/files`},{default:n(()=>[h("span",{class:j(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/files`}])},"Files",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/chat`},{default:n(()=>{var N,k;return[h("span",{class:j(["text-h6 me-5 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/chat`}])},[(N=e(b))!=null&&N.total_unseen_messages?(o(),v(Be,{key:0,class:"new-badge",color:"error",content:(k=e(b))==null?void 0:k.total_unseen_messages},{default:n(()=>[ft]),_:1},8,["content"])):(o(),V("span",ht,"Inbox"))],2)]}),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/team`},{default:n(()=>[h("span",{class:j(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/team`}])},"Your Team",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/marketplace`},{default:n(()=>[h("span",{class:j(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/marketplace`}])},"Marketplace",2)]),_:1},8,["to"])])):T("",!0),l(Pe),e(x)&&((R=e(b))!=null&&R.bucks_share)?(o(),V("span",yt,[e(a).isAdmin||e(a).isManager?(o(),V("span",bt,[l(r,{to:`/projects/${e(i)}/bucks`},{default:n(()=>{var N,k;return[I($(((N=e(y))==null?void 0:N.bucks_label)||"Darby Bucks")+" ",1),h("span",kt,"$"+$((k=e(b))==null?void 0:k.bucks_share_amount),1)]}),_:1},8,["to"])])):(o(),V("span",_t,[l(r,{to:`/projects/${e(i)}/bucks?tab=manage-bucks`},{default:n(()=>{var N,k;return[I(" Earned "+$(((N=e(y))==null?void 0:N.bucks_label)||"Darby Bucks")+" ",1),h("span",xt,"$"+$((k=e(b))==null?void 0:k.bucks_earnings),1)]}),_:1},8,["to"])]))])):T("",!0)])]}),default:n(()=>[l(m,{ref_key:"refLoadingIndicator",ref:g},null,512),l(P,null,{default:n(({Component:R})=>[(o(),v(Ee,{timeout:0,onFallback:u[1]||(u[1]=N=>s.value=!0),onResolve:u[2]||(u[2]=N=>s.value=!1)},{default:n(()=>[(o(),v(_(R)))]),_:2},1024))]),_:1})]),_:1},8,["nav-items"])}}},It=K(Nt,[["__scopeId","data-v-83649765"]]);export{It as default};
