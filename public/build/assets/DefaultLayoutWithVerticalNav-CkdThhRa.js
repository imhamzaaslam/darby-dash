import{_ as ge}from"./AppLoadingIndicator-C2S3KoQs.js";import{_ as Y,R as re,U as N,T as le,r as S,W as he,X as ye,Y as ce,l as D,j as W,w as B,a as F,o,f as v,e as i,d as y,z as U,I as M,h as _,n as e,p as h,q as C,J as L,b as l,P as ue,y as R,Z as be,c as $,F as J,i as K,x as w,$ as de,a0 as ve,k as ke,a1 as _e,m as ee,a2 as O,a3 as Ne,s as G,t as I,v as A,a4 as pe,a5 as xe,a6 as $e,a7 as z,a8 as Ce,a9 as Ve,A as je,B as we,aa as H,ab as Ie,E as Se,ac as Ae,V as te,ad as Re,L as Me,M as Le,N as ae,O as ne,ae as Te,Q as Oe,S as Be}from"./main-B9aL33ab.js";import{c as Pe,a as me}from"./casl-CYzn9HQH.js";import Ee from"./NavbarThemeSwitcher-Ct6UYbex.js";import qe from"./NavBarNotifications-Eu2-Zypx.js";import Ge from"./UserProfile-VwO6IEcI.js";const De=re({name:"TransitionExpand",setup(t,{slots:n}){const m=a=>{const s=getComputedStyle(a).width;a.style.width=s,a.style.position="absolute",a.style.visibility="hidden",a.style.height="auto";const k=getComputedStyle(a).height;a.style.width="",a.style.position="",a.style.visibility="",a.style.height="0px",getComputedStyle(a).height,requestAnimationFrame(()=>{a.style.height=k})},c=a=>{a.style.height="auto"},d=a=>{const s=getComputedStyle(a).height;a.style.height=s,getComputedStyle(a).height,requestAnimationFrame(()=>{a.style.height="0px"})};return()=>N(N(le),{name:"expand",onEnter:m,onAfterEnter:c,onLeave:d},()=>{var a;return(a=n.default)==null?void 0:a.call(n)})}}),Fe=Y(De,[["__scopeId","data-v-22ff91fc"]]),We=t=>(de("data-v-443b1a10"),t=t(),ve(),t),He={class:"nav-header"},Ue=We(()=>y("div",{class:"vertical-nav-items-shadow"},null,-1)),ze={__name:"VerticalNav",props:{tag:{type:null,required:!1,default:"aside"},navItems:{type:null,required:!0},isOverlayNavActive:{type:Boolean,required:!0},toggleIsOverlayNavActive:{type:Function,required:!0}},setup(t){const n=t,m=S(),c=he(m);ye(ce,c);const d=D(),a=r=>"heading"in r?et:"children"in r?Ke:fe,s=W();B(()=>s.name,()=>{n.toggleIsOverlayNavActive(!1)});const k=S(!1),g=r=>k.value=r,V=r=>{k.value=r.target.scrollTop>0},b=d.isVerticalNavMini(c);return(r,u)=>{const f=F("RouterLink");return o(),v(_(n.tag),{ref_key:"refNav",ref:m,class:w(["layout-vertical-nav pt-3",[{"overlay-nav":e(d).isLessThanOverlayNavBreakpoint,hovered:e(c),visible:t.isOverlayNavActive,scrolled:e(k)}]])},{default:i(()=>[y("div",He,[U(r.$slots,"nav-header",{},()=>[M((o(),v(_(e(h).app.iconRenderer||"div"),C({class:["header-action d-none nav-unpin",e(d).isVerticalNavCollapsed&&"d-lg-block"]},e(h).icons.verticalNavUnPinned,{onClick:u[0]||(u[0]=p=>e(d).isVerticalNavCollapsed=!e(d).isVerticalNavCollapsed)}),null,16,["class"])),[[L,e(d).isVerticalNavCollapsed]]),M((o(),v(_(e(h).app.iconRenderer||"div"),C({class:["header-action d-none nav-pin",!e(d).isVerticalNavCollapsed&&"d-lg-block"]},e(h).icons.verticalNavPinned,{onClick:u[1]||(u[1]=p=>e(d).isVerticalNavCollapsed=!e(d).isVerticalNavCollapsed)}),null,16,["class"])),[[L,!e(d).isVerticalNavCollapsed]]),(o(),v(_(e(h).app.iconRenderer||"div"),C({class:"header-action d-lg-none"},e(h).icons.close,{onClick:u[2]||(u[2]=p=>t.toggleIsOverlayNavActive(!1))}),null,16))],!0)]),U(r.$slots,"before-nav-items",{},()=>[Ue],!0),l(f,{to:"/",class:"bottom-logo"},{default:i(()=>[e(b)?R("",!0):(o(),v(e(ue),{key:0,nodes:e(h).app.watermarkLogo},null,8,["nodes"]))]),_:1}),U(r.$slots,"nav-items",{updateIsVerticalNavScrolled:g},()=>[(o(),v(e(be),{key:e(d).isAppRTL,tag:"ul",class:"nav-items",options:{wheelPropagation:!1},onPsScrollY:V},{default:i(()=>[(o(!0),$(J,null,K(t.navItems,(p,T)=>(o(),v(_(a(p)),{key:T,item:p},null,8,["item"]))),128))]),_:1}))],!0)]),_:3},8,["class"])}}},Ye=Y(ze,[["__scopeId","data-v-443b1a10"]]),Je={class:"nav-group-children"},Ke=Object.assign({name:"VerticalNavGroup"},{__name:"VerticalNavGroup",props:{item:{type:null,required:!0}},setup(t){const n=t,m=W(),c=ke(),d=D(),a=d.isVerticalNavMini(),s=_e(ce,S(!1)),k=S(!1),g=S(!1),V=u=>u.some(f=>{let p=O.value.includes(f.title);return"children"in f&&(p=V(f.children)||p),p}),b=u=>{u.forEach(f=>{"children"in f&&b(f.children),O.value=O.value.filter(p=>p!==f.title)})};B(()=>m.path,()=>{const u=ee(n.item.children,c);g.value=u&&!d.isVerticalNavMini(s).value,k.value=u},{immediate:!0}),B(g,u=>{const f=O.value.indexOf(n.item.title);u&&f===-1?O.value.push(n.item.title):!u&&f!==-1&&(O.value.splice(f,1),b(n.item.children))},{immediate:!0}),B(O,u=>{if(u.at(-1)===n.item.title)return;const p=ee(n.item.children,c);p||V(n.item.children)||(g.value=p,k.value=p)},{deep:!0}),B(d.isVerticalNavMini(s),u=>{g.value=u?!1:k.value});const r=Ne();return(u,f)=>e(Pe)(t.item)?(o(),$("li",{key:0,class:w(["nav-group",[{active:e(k),open:e(g),disabled:t.item.disable}]])},[y("div",{class:"nav-group-label",onClick:f[0]||(f[0]=p=>g.value=!e(g))},[(o(),v(_(e(h).app.iconRenderer||"div"),C(t.item.icon||e(h).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),(o(),v(_(e(r)?pe:"div"),C({name:"transition-slide-x"},e(r)?void 0:{class:"d-flex align-center flex-grow-1"}),{default:i(()=>[M((o(),v(_(e(h).app.i18n.enable?"i18n-t":"span"),C(e(G)(t.item.title,"span"),{key:"title",class:"nav-item-title"}),{default:i(()=>[I(A(t.item.title),1)]),_:1},16)),[[L,!e(a)]]),t.item.badgeContent?M((o(),v(_(e(h).app.i18n.enable?"i18n-t":"span"),C({key:0},e(G)(t.item.badgeContent,"span"),{key:"badge",class:["nav-item-badge",t.item.badgeClass]}),{default:i(()=>[I(A(t.item.badgeContent),1)]),_:1},16,["class"])),[[L,!e(a)]]):R("",!0),M((o(),v(_(e(h).app.iconRenderer||"div"),C(e(h).icons.chevronRight,{key:"arrow",class:"nav-group-arrow"}),null,16)),[[L,!e(a)]])]),_:1},16))]),l(e(Fe),null,{default:i(()=>[M(y("ul",Je,[(o(!0),$(J,null,K(t.item.children,p=>(o(),v(_("children"in p?"VerticalNavGroup":e(fe)),{key:p.title,item:p},null,8,["item"]))),128))],512),[[L,e(g)]])]),_:1})],2)):R("",!0)}}),Qe=re({props:{navItems:{type:Array,required:!0},verticalNavAttrs:{type:Object,default:()=>({})}},setup(t,{slots:n}){const{width:m}=xe(),c=D(),d=S(!1),a=S(!1),s=$e(d),k=W(),g=z(()=>{const V=k.matched.some(r=>r.path.startsWith("/projects")),b=k.params.id;return V&&!!b});return Ce(d,a),B(m,()=>{!c.isLessThanOverlayNavBreakpoint&&a.value&&(a.value=!1)}),()=>{var E,Q,X,Z;const V=Ve(t,"verticalNavAttrs"),{wrapper:b,wrapperProps:r,...u}=V.value,f=N(Ye,{isOverlayNavActive:d.value,toggleIsOverlayNavActive:s,navItems:t.navItems,...u},{"nav-header":()=>{var q;return(q=n["vertical-nav-header"])==null?void 0:q.call(n)},"before-nav-items":()=>{var q;return(q=n["before-vertical-nav-items"])==null?void 0:q.call(n)}}),p=N("header",{class:["layout-navbar","logo-navbar",{"navbar-blur":c.isNavbarBlurEnabled}]},[N("div",{class:["navbar-content-container","logo-navbar-content-container"]},(E=n.logoNavbar)==null?void 0:E.call(n))]),T=g.value?N("header",{class:["layout-navbar","project-navbar"]},[N("div",{class:"navbar-content-container"},(Q=n.navbar)==null?void 0:Q.call(n,{toggleVerticalOverlayNavActive:s}))]):null,P=N("main",{class:"layout-page-content"},N("div",{class:"page-content-container"},(X=n.default)==null?void 0:X.call(n))),x=N("footer",{class:"layout-footer"},[N("div",{class:"footer-content-container"},(Z=n.footer)==null?void 0:Z.call(n))]),j=N("div",{class:["layout-overlay",{visible:a.value}],onClick:()=>{a.value=!a.value}});return N("div",{class:["layout-wrapper",...c._layoutClasses]},[b?N(b,r,{default:()=>f}):f,N("div",{class:"layout-content-wrapper"},[p,T,P,x]),j])}}}),fe={__name:"VerticalNavLink",props:{item:{type:null,required:!0}},setup(t){const m=D().isVerticalNavMini();return(c,d)=>e(me)(t.item.action,t.item.subject)?(o(),$("li",{key:0,class:w(["nav-link",{disabled:t.item.disable}])},[(o(),v(_(t.item.to?"RouterLink":"a"),C(e(we)(t.item),{class:{"router-link-active router-link-exact-active":e(je)(t.item,c.$router)}}),{default:i(()=>[(o(),v(_(e(h).app.iconRenderer||"div"),C(t.item.icon||e(h).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),l(pe,{name:"transition-slide-x"},{default:i(()=>[M((o(),v(_(e(h).app.i18n.enable?"i18n-t":"span"),C({key:"title",class:"nav-item-title"},e(G)(t.item.title,"span")),{default:i(()=>[I(A(t.item.title),1)]),_:1},16)),[[L,!e(m)]]),t.item.badgeContent?M((o(),v(_(e(h).app.i18n.enable?"i18n-t":"span"),C({key:"badge",class:["nav-item-badge",t.item.badgeClass]},e(G)(t.item.badgeContent,"span")),{default:i(()=>[I(A(t.item.badgeContent),1)]),_:1},16,["class"])),[[L,!e(m)]]):R("",!0)]),_:1})]),_:1},16,["class"]))],2)):R("",!0)}},Xe={key:0,class:"nav-section-title"},Ze={class:"title-wrapper"},et={__name:"VerticalNavSectionTitle",props:{item:{type:null,required:!0}},setup(t){const m=D().isVerticalNavMini();return(c,d)=>e(me)(t.item.action,t.item.subject)?(o(),$("li",Xe,[y("div",Ze,[l(le,{name:"vertical-nav-section-title",mode:"out-in"},{default:i(()=>[(o(),v(_(e(m)?e(h).app.iconRenderer:e(h).app.i18n.enable?"i18n-t":"span"),C({key:e(m),class:e(m)?"placeholder-icon":"title-text"},{...e(h).icons.sectionTitlePlaceholder,...e(G)(t.item.heading,"span")}),{default:i(()=>[I(A(e(m)?null:t.item.heading),1)]),_:1},16,["class"]))]),_:1})])])):R("",!0)}},se=H().isAdmin,ie=H().isSuperAdmin,oe=H().getCompanyUuid,tt=[{title:"Home",to:{name:"root"},icon:{icon:"tabler-align-box-bottom-center"}},ie&&{title:"Companies",icon:{icon:"tabler-users"},to:{name:"companies-list"}},!ie&&{title:"Projects",icon:{icon:"tabler-chart-histogram"},to:{name:"web-designs-list"}},se&&{title:"Members",icon:{icon:"tabler-users"},to:{name:"members-list"}},se&&{title:"Settings",icon:{icon:"tabler-settings"},children:[oe&&{title:"Company Setting",to:{name:"manage-company-settings",params:{id:oe}}},{title:"Manage Roles",to:"roles-setting"},{title:"Manage Templates",to:"templates-setting"},{title:"Manage Services",to:"services-setting"}]}],at=tt.filter(Boolean),nt=t=>(de("data-v-9e35ac78"),t=t(),ve(),t),st={class:"d-flex h-100 align-center"},it={class:"d-flex h-100 align-center"},ot={key:0},rt={class:"text-primary"},lt={key:1},ct={class:"text-primary"},ut={key:1,class:"d-none d-lg-flex align-center"},dt=nt(()=>y("span",{class:"inner-badge-text"},"Inbox",-1)),vt={key:1},pt={key:2,class:"text-h6 font-weight-bold me-4 d-none d-lg-flex"},mt={key:0},ft={class:"text-primary"},gt={key:1},ht={class:"text-primary"},yt={__name:"DefaultLayoutWithVerticalNav",setup(t){const n=S(!1),m=S(null),c=W(),d=Ie(),a=H(),s=S(null);S(null),Se(async()=>{await a.tenantInfo()}),Ae(()=>{s.value=c.params.id}),B([n,m],()=>{n.value&&m.value&&m.value.fallbackHandle(),!n.value&&m.value&&m.value.resolveHandle()},{immediate:!0});const k=z(()=>{const V=c.name==="manage-templates",b=c.name==="manage-company-settings";return!(V||b)&&c.params.id!==void 0}),g=z(()=>d.getProject);return(V,b)=>{const r=F("RouterLink"),u=F("IconBtn"),f=ge,p=F("RouterView");return o(),v(e(Qe),{"nav-items":e(at)},{logoNavbar:i(()=>[y("div",st,[l(r,{to:"/",class:"app-logo app-title-wrapper"},{default:i(()=>[l(e(ue),{nodes:e(h).app.logo},null,8,["nodes"])]),_:1}),l(Ee),l(qe,{class:"me-2"}),l(Ge)])]),navbar:i(({toggleVerticalOverlayNavActive:T})=>{var P;return[y("div",it,[l(u,{id:"vertical-nav-toggle-btn",class:"ms-n3 d-lg-none",onClick:x=>T(!0)},{default:i(()=>[l(te,{size:"26",icon:"tabler-menu-2"})]),_:2},1032,["onClick"]),e(k)?(o(),v(u,{key:0,class:"ms-n1 d-lg-none",onClick:b[0]||(b[0]=Re(()=>{},["prevent"]))},{default:i(()=>[l(te,{size:"26",icon:"tabler-dots-vertical"}),l(Me,{activator:"parent",class:"d-lg-none","offset-y":""},{default:i(()=>[l(Le,null,{default:i(()=>{var x;return[(o(!0),$(J,null,K([{text:"Overview",route:`/projects/web-designs/${e(s)}`},{text:"Tasks",route:`/projects/${e(s)}/tasks/add`},{text:"Milestones",route:`/projects/${e(s)}/milestones`},{text:"Calendar",route:`/projects/${e(s)}/calendar`},{text:"Files",route:`/projects/${e(s)}/files`},{text:"Inbox",route:`/projects/${e(s)}/chat`},{text:"Your Team",route:`/projects/${e(s)}/team`},{text:"Marketplace",route:`/projects/${e(s)}/marketplace`}],j=>(o(),v(ae,{key:j.text},{default:i(()=>[l(r,{to:j.route},{default:i(()=>[l(ne,null,{default:i(()=>[I(A(j.text),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128)),(x=e(g))!=null&&x.bucks_share?(o(),v(ae,{key:0},{default:i(()=>[l(r,{to:e(a).isAdmin||e(a).isManager?`/projects/${e(s)}/bucks`:`/projects/${e(s)}/bucks?tab=manage-bucks`},{default:i(()=>[l(ne,null,{default:i(()=>{var j,E;return[e(a).isAdmin||e(a).isManager?(o(),$("span",ot,[I(" Darby Bucks "),y("span",rt,"$"+A((j=e(g))==null?void 0:j.bucks_share_amount),1)])):(o(),$("span",lt,[I(" Earned Bucks "),y("span",ct,"$"+A((E=e(g))==null?void 0:E.bucks_earnings),1)]))]}),_:1})]),_:1},8,["to"])]),_:1})):R("",!0)]}),_:1})]),_:1})]),_:1})):R("",!0),e(k)?(o(),$("div",ut,[l(r,{to:`/projects/web-designs/${e(s)}`},{default:i(()=>[y("span",{class:w(["text-h6 ms-3 me-5 inner-badge-text",{"text-primary":e(c).path===`/projects/web-designs/${e(s)}`}])},"Overview",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(s)}/tasks/add`},{default:i(()=>[y("span",{class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/tasks/add`}])}," Tasks ",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(s)}/milestones`,class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/milestones`}])},{default:i(()=>[I(" Milestones ")]),_:1},8,["to","class"]),l(r,{to:`/projects/${e(s)}/calendar`},{default:i(()=>[y("span",{class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/calendar`}])},"Calendar",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(s)}/files`},{default:i(()=>[y("span",{class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/files`}])},"Files",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(s)}/chat`},{default:i(()=>{var x,j;return[y("span",{class:w(["text-h6 me-5 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/chat`}])},[(x=e(g))!=null&&x.total_unseen_messages?(o(),v(Te,{key:0,class:"new-badge",color:"error",content:(j=e(g))==null?void 0:j.total_unseen_messages},{default:i(()=>[dt]),_:1},8,["content"])):(o(),$("span",vt,"Inbox"))],2)]}),_:1},8,["to"]),l(r,{to:`/projects/${e(s)}/team`},{default:i(()=>[y("span",{class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/team`}])},"Your Team",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(s)}/marketplace`},{default:i(()=>[y("span",{class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/marketplace`}])},"Marketplace",2)]),_:1},8,["to"])])):R("",!0),l(Oe),e(k)&&((P=e(g))!=null&&P.bucks_share)?(o(),$("span",pt,[e(a).isAdmin||e(a).isManager?(o(),$("span",mt,[l(r,{to:`/projects/${e(s)}/bucks`},{default:i(()=>{var x;return[I(" Darby Bucks "),y("span",ft,"$"+A((x=e(g))==null?void 0:x.bucks_share_amount),1)]}),_:1},8,["to"])])):(o(),$("span",gt,[l(r,{to:`/projects/${e(s)}/bucks?tab=manage-bucks`},{default:i(()=>{var x;return[I(" Earned Bucks "),y("span",ht,"$"+A((x=e(g))==null?void 0:x.bucks_earnings),1)]}),_:1},8,["to"])]))])):R("",!0)])]}),default:i(()=>[l(f,{ref_key:"refLoadingIndicator",ref:m},null,512),l(p,null,{default:i(({Component:T})=>[(o(),v(Be,{timeout:0,onFallback:b[1]||(b[1]=P=>n.value=!0),onResolve:b[2]||(b[2]=P=>n.value=!1)},{default:i(()=>[(o(),v(_(T)))]),_:2},1024))]),_:1})]),_:1},8,["nav-items"])}}},Ct=Y(yt,[["__scopeId","data-v-9e35ac78"]]);export{Ct as default};
