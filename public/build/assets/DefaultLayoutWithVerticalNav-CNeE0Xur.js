import{_ as ge}from"./AppLoadingIndicator-DzTE1qtE.js";import{_ as z,R as re,U as _,T as le,r as V,W as he,X as ye,Y as ce,l as D,j as W,w as T,a as F,o,f as v,e as i,z as Z,b as r,n as e,P as ue,p as k,y as M,Z as be,c as $,F as Y,i as J,h as N,x as I,$ as de,a0 as ve,d as h,k as _e,a1 as ke,m as ee,a2 as R,a3 as xe,q as A,I as B,s as G,t as S,v as C,J as P,a4 as pe,a5 as Ne,a6 as $e,a7 as U,a8 as je,a9 as we,A as Ie,B as Se,aa as H,ab as Ve,E as Ae,ac as Ce,V as te,ad as Me,L as Le,M as Re,N as ae,O as ne,ae as Te,Q as Oe,S as Be}from"./main-Bx9gTqua.js";import{c as Pe,a as me}from"./casl-BFbO6LDA.js";import Ee from"./NavbarThemeSwitcher-n93cOwaR.js";import qe from"./NavBarNotifications-BY6g0Q1q.js";import Ge from"./UserProfile-CNcn8Dqo.js";const De=re({name:"TransitionExpand",setup(t,{slots:n}){const u=a=>{const s=getComputedStyle(a).width;a.style.width=s,a.style.position="absolute",a.style.visibility="hidden",a.style.height="auto";const b=getComputedStyle(a).height;a.style.width="",a.style.position="",a.style.visibility="",a.style.height="0px",getComputedStyle(a).height,requestAnimationFrame(()=>{a.style.height=b})},c=a=>{a.style.height="auto"},y=a=>{const s=getComputedStyle(a).height;a.style.height=s,getComputedStyle(a).height,requestAnimationFrame(()=>{a.style.height="0px"})};return()=>_(_(le),{name:"expand",onEnter:u,onAfterEnter:c,onLeave:y},()=>{var a;return(a=n.default)==null?void 0:a.call(n)})}}),Fe=z(De,[["__scopeId","data-v-22ff91fc"]]),We=t=>(de("data-v-6a96ce46"),t=t(),ve(),t),He=We(()=>h("div",{class:"vertical-nav-items-shadow"},null,-1)),Ue={__name:"VerticalNav",props:{tag:{type:null,required:!1,default:"aside"},navItems:{type:null,required:!0},isOverlayNavActive:{type:Boolean,required:!0},toggleIsOverlayNavActive:{type:Function,required:!0}},setup(t){const n=t,u=V(),c=he(u);ye(ce,c);const y=D(),a=l=>"heading"in l?Ze:"children"in l?Je:fe,s=W();T(()=>s.name,()=>{n.toggleIsOverlayNavActive(!1)});const b=V(!1),p=l=>b.value=l,j=l=>{b.value=l.target.scrollTop>0},g=y.isVerticalNavMini(c);return(l,f)=>{const d=F("RouterLink");return o(),v(N(n.tag),{ref_key:"refNav",ref:u,class:I(["layout-vertical-nav pt-3",[{"overlay-nav":e(y).isLessThanOverlayNavBreakpoint,hovered:e(c),visible:t.isOverlayNavActive,scrolled:e(b)}]])},{default:i(()=>[Z(l.$slots,"before-nav-items",{},()=>[He],!0),r(d,{to:"/",class:"bottom-logo"},{default:i(()=>[e(g)?M("",!0):(o(),v(e(ue),{key:0,nodes:e(k).app.watermarkLogo},null,8,["nodes"]))]),_:1}),Z(l.$slots,"nav-items",{updateIsVerticalNavScrolled:p},()=>[(o(),v(e(be),{key:e(y).isAppRTL,tag:"ul",class:"nav-items",options:{wheelPropagation:!1},onPsScrollY:j},{default:i(()=>[(o(!0),$(Y,null,J(t.navItems,(m,L)=>(o(),v(N(a(m)),{key:L,item:m},null,8,["item"]))),128))]),_:1}))],!0)]),_:3},8,["class"])}}},ze=z(Ue,[["__scopeId","data-v-6a96ce46"]]),Ye={class:"nav-group-children"},Je=Object.assign({name:"VerticalNavGroup"},{__name:"VerticalNavGroup",props:{item:{type:null,required:!0}},setup(t){const n=t,u=W(),c=_e(),y=D(),a=y.isVerticalNavMini(),s=ke(ce,V(!1)),b=V(!1),p=V(!1),j=f=>f.some(d=>{let m=R.value.includes(d.title);return"children"in d&&(m=j(d.children)||m),m}),g=f=>{f.forEach(d=>{"children"in d&&g(d.children),R.value=R.value.filter(m=>m!==d.title)})};T(()=>u.path,()=>{const f=ee(n.item.children,c);p.value=f&&!y.isVerticalNavMini(s).value,b.value=f},{immediate:!0}),T(p,f=>{const d=R.value.indexOf(n.item.title);f&&d===-1?R.value.push(n.item.title):!f&&d!==-1&&(R.value.splice(d,1),g(n.item.children))},{immediate:!0}),T(R,f=>{if(f.at(-1)===n.item.title)return;const m=ee(n.item.children,c);m||j(n.item.children)||(p.value=m,b.value=m)},{deep:!0}),T(y.isVerticalNavMini(s),f=>{p.value=f?!1:b.value});const l=xe();return(f,d)=>e(Pe)(t.item)?(o(),$("li",{key:0,class:I(["nav-group",[{active:e(b),open:e(p),disabled:t.item.disable}]])},[h("div",{class:"nav-group-label",onClick:d[0]||(d[0]=m=>p.value=!e(p))},[(o(),v(N(e(k).app.iconRenderer||"div"),A(t.item.icon||e(k).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),(o(),v(N(e(l)?pe:"div"),A({name:"transition-slide-x"},e(l)?void 0:{class:"d-flex align-center flex-grow-1"}),{default:i(()=>[B((o(),v(N(e(k).app.i18n.enable?"i18n-t":"span"),A(e(G)(t.item.title,"span"),{key:"title",class:"nav-item-title"}),{default:i(()=>[S(C(t.item.title),1)]),_:1},16)),[[P,!e(a)]]),t.item.badgeContent?B((o(),v(N(e(k).app.i18n.enable?"i18n-t":"span"),A({key:0},e(G)(t.item.badgeContent,"span"),{key:"badge",class:["nav-item-badge",t.item.badgeClass]}),{default:i(()=>[S(C(t.item.badgeContent),1)]),_:1},16,["class"])),[[P,!e(a)]]):M("",!0),B((o(),v(N(e(k).app.iconRenderer||"div"),A(e(k).icons.chevronRight,{key:"arrow",class:"nav-group-arrow"}),null,16)),[[P,!e(a)]])]),_:1},16))]),r(e(Fe),null,{default:i(()=>[B(h("ul",Ye,[(o(!0),$(Y,null,J(t.item.children,m=>(o(),v(N("children"in m?"VerticalNavGroup":e(fe)),{key:m.title,item:m},null,8,["item"]))),128))],512),[[P,e(p)]])]),_:1})],2)):M("",!0)}}),Ke=re({props:{navItems:{type:Array,required:!0},verticalNavAttrs:{type:Object,default:()=>({})}},setup(t,{slots:n}){const{width:u}=Ne(),c=D(),y=V(!1),a=V(!1),s=$e(y),b=W(),p=U(()=>{const j=b.matched.some(l=>l.path.startsWith("/projects")),g=b.params.id;return j&&!!g});return je(y,a),T(u,()=>{!c.isLessThanOverlayNavBreakpoint&&a.value&&(a.value=!1)}),()=>{var E,K,Q,X;const j=we(t,"verticalNavAttrs"),{wrapper:g,wrapperProps:l,...f}=j.value,d=_(ze,{isOverlayNavActive:y.value,toggleIsOverlayNavActive:s,navItems:t.navItems,...f},{"nav-header":()=>{var q;return(q=n["vertical-nav-header"])==null?void 0:q.call(n)},"before-nav-items":()=>{var q;return(q=n["before-vertical-nav-items"])==null?void 0:q.call(n)}}),m=_("header",{class:["layout-navbar","logo-navbar",{"navbar-blur":c.isNavbarBlurEnabled}]},[_("div",{class:["navbar-content-container","logo-navbar-content-container"]},(E=n.logoNavbar)==null?void 0:E.call(n))]),L=p.value?_("header",{class:["layout-navbar","project-navbar"]},[_("div",{class:"navbar-content-container"},(K=n.navbar)==null?void 0:K.call(n,{toggleVerticalOverlayNavActive:s}))]):null,O=_("main",{class:"layout-page-content"},_("div",{class:"page-content-container"},(Q=n.default)==null?void 0:Q.call(n))),x=_("footer",{class:"layout-footer"},[_("div",{class:"footer-content-container"},(X=n.footer)==null?void 0:X.call(n))]),w=_("div",{class:["layout-overlay",{visible:a.value}],onClick:()=>{a.value=!a.value}});return _("div",{class:["layout-wrapper",...c._layoutClasses]},[g?_(g,l,{default:()=>d}):d,_("div",{class:"layout-content-wrapper"},[m,L,O,x]),w])}}}),fe={__name:"VerticalNavLink",props:{item:{type:null,required:!0}},setup(t){const u=D().isVerticalNavMini();return(c,y)=>e(me)(t.item.action,t.item.subject)?(o(),$("li",{key:0,class:I(["nav-link",{disabled:t.item.disable}])},[(o(),v(N(t.item.to?"RouterLink":"a"),A(e(Se)(t.item),{class:{"router-link-active router-link-exact-active":e(Ie)(t.item,c.$router)}}),{default:i(()=>[(o(),v(N(e(k).app.iconRenderer||"div"),A(t.item.icon||e(k).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),r(pe,{name:"transition-slide-x"},{default:i(()=>[B((o(),v(N(e(k).app.i18n.enable?"i18n-t":"span"),A({key:"title",class:"nav-item-title"},e(G)(t.item.title,"span")),{default:i(()=>[S(C(t.item.title),1)]),_:1},16)),[[P,!e(u)]]),t.item.badgeContent?B((o(),v(N(e(k).app.i18n.enable?"i18n-t":"span"),A({key:"badge",class:["nav-item-badge",t.item.badgeClass]},e(G)(t.item.badgeContent,"span")),{default:i(()=>[S(C(t.item.badgeContent),1)]),_:1},16,["class"])),[[P,!e(u)]]):M("",!0)]),_:1})]),_:1},16,["class"]))],2)):M("",!0)}},Qe={key:0,class:"nav-section-title"},Xe={class:"title-wrapper"},Ze={__name:"VerticalNavSectionTitle",props:{item:{type:null,required:!0}},setup(t){const u=D().isVerticalNavMini();return(c,y)=>e(me)(t.item.action,t.item.subject)?(o(),$("li",Qe,[h("div",Xe,[r(le,{name:"vertical-nav-section-title",mode:"out-in"},{default:i(()=>[(o(),v(N(e(u)?e(k).app.iconRenderer:e(k).app.i18n.enable?"i18n-t":"span"),A({key:e(u),class:e(u)?"placeholder-icon":"title-text"},{...e(k).icons.sectionTitlePlaceholder,...e(G)(t.item.heading,"span")}),{default:i(()=>[S(C(e(u)?null:t.item.heading),1)]),_:1},16,["class"]))]),_:1})])])):M("",!0)}},se=H().isAdmin,ie=H().isSuperAdmin,oe=H().getCompanyUuid,et=[{title:"Home",to:{name:"root"},icon:{icon:"tabler-align-box-bottom-center"}},ie&&{title:"Companies",icon:{icon:"tabler-users"},to:{name:"companies-list"}},!ie&&{title:"Projects",icon:{icon:"tabler-chart-histogram"},to:{name:"web-designs-list"}},se&&{title:"Members",icon:{icon:"tabler-users"},to:{name:"members-list"}},se&&{title:"Settings",icon:{icon:"tabler-settings"},children:[oe&&{title:"Company Setting",to:{name:"manage-company-settings",params:{id:oe}}},{title:"Manage Roles",to:"roles-setting"},{title:"Manage Templates",to:"templates-setting"},{title:"Manage Services",to:"services-setting"}]}],tt=et.filter(Boolean),at=t=>(de("data-v-9e35ac78"),t=t(),ve(),t),nt={class:"d-flex h-100 align-center"},st={class:"d-flex h-100 align-center"},it={key:0},ot={class:"text-primary"},rt={key:1},lt={class:"text-primary"},ct={key:1,class:"d-none d-lg-flex align-center"},ut=at(()=>h("span",{class:"inner-badge-text"},"Inbox",-1)),dt={key:1},vt={key:2,class:"text-h6 font-weight-bold me-4 d-none d-lg-flex"},pt={key:0},mt={class:"text-primary"},ft={key:1},gt={class:"text-primary"},ht={__name:"DefaultLayoutWithVerticalNav",setup(t){const n=V(!1),u=V(null),c=W(),y=Ve(),a=H(),s=V(null);V(null),Ae(async()=>{await a.tenantInfo()}),Ce(()=>{s.value=c.params.id}),T([n,u],()=>{n.value&&u.value&&u.value.fallbackHandle(),!n.value&&u.value&&u.value.resolveHandle()},{immediate:!0});const b=U(()=>{const j=c.name==="manage-templates",g=c.name==="manage-company-settings";return!(j||g)&&c.params.id!==void 0}),p=U(()=>y.getProject);return(j,g)=>{const l=F("RouterLink"),f=F("IconBtn"),d=ge,m=F("RouterView");return o(),v(e(Ke),{"nav-items":e(tt)},{logoNavbar:i(()=>[h("div",nt,[r(l,{to:"/",class:"app-logo app-title-wrapper"},{default:i(()=>[r(e(ue),{nodes:e(k).app.logo},null,8,["nodes"])]),_:1}),r(Ee),r(qe,{class:"me-2"}),r(Ge)])]),navbar:i(({toggleVerticalOverlayNavActive:L})=>{var O;return[h("div",st,[r(f,{id:"vertical-nav-toggle-btn",class:"ms-n3 d-lg-none",onClick:x=>L(!0)},{default:i(()=>[r(te,{size:"26",icon:"tabler-menu-2"})]),_:2},1032,["onClick"]),e(b)?(o(),v(f,{key:0,class:"ms-n1 d-lg-none",onClick:g[0]||(g[0]=Me(()=>{},["prevent"]))},{default:i(()=>[r(te,{size:"26",icon:"tabler-dots-vertical"}),r(Le,{activator:"parent",class:"d-lg-none","offset-y":""},{default:i(()=>[r(Re,null,{default:i(()=>{var x;return[(o(!0),$(Y,null,J([{text:"Overview",route:`/projects/web-designs/${e(s)}`},{text:"Tasks",route:`/projects/${e(s)}/tasks/add`},{text:"Milestones",route:`/projects/${e(s)}/milestones`},{text:"Calendar",route:`/projects/${e(s)}/calendar`},{text:"Files",route:`/projects/${e(s)}/files`},{text:"Inbox",route:`/projects/${e(s)}/chat`},{text:"Your Team",route:`/projects/${e(s)}/team`},{text:"Marketplace",route:`/projects/${e(s)}/marketplace`}],w=>(o(),v(ae,{key:w.text},{default:i(()=>[r(l,{to:w.route},{default:i(()=>[r(ne,null,{default:i(()=>[S(C(w.text),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128)),(x=e(p))!=null&&x.bucks_share?(o(),v(ae,{key:0},{default:i(()=>[r(l,{to:e(a).isAdmin||e(a).isManager?`/projects/${e(s)}/bucks`:`/projects/${e(s)}/bucks?tab=manage-bucks`},{default:i(()=>[r(ne,null,{default:i(()=>{var w,E;return[e(a).isAdmin||e(a).isManager?(o(),$("span",it,[S(" Darby Bucks "),h("span",ot,"$"+C((w=e(p))==null?void 0:w.bucks_share_amount),1)])):(o(),$("span",rt,[S(" Earned Bucks "),h("span",lt,"$"+C((E=e(p))==null?void 0:E.bucks_earnings),1)]))]}),_:1})]),_:1},8,["to"])]),_:1})):M("",!0)]}),_:1})]),_:1})]),_:1})):M("",!0),e(b)?(o(),$("div",ct,[r(l,{to:`/projects/web-designs/${e(s)}`},{default:i(()=>[h("span",{class:I(["text-h6 ms-3 me-5 inner-badge-text",{"text-primary":e(c).path===`/projects/web-designs/${e(s)}`}])},"Overview",2)]),_:1},8,["to"]),r(l,{to:`/projects/${e(s)}/tasks/add`},{default:i(()=>[h("span",{class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/tasks/add`}])}," Tasks ",2)]),_:1},8,["to"]),r(l,{to:`/projects/${e(s)}/milestones`,class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/milestones`}])},{default:i(()=>[S(" Milestones ")]),_:1},8,["to","class"]),r(l,{to:`/projects/${e(s)}/calendar`},{default:i(()=>[h("span",{class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/calendar`}])},"Calendar",2)]),_:1},8,["to"]),r(l,{to:`/projects/${e(s)}/files`},{default:i(()=>[h("span",{class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/files`}])},"Files",2)]),_:1},8,["to"]),r(l,{to:`/projects/${e(s)}/chat`},{default:i(()=>{var x,w;return[h("span",{class:I(["text-h6 me-5 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/chat`}])},[(x=e(p))!=null&&x.total_unseen_messages?(o(),v(Te,{key:0,class:"new-badge",color:"error",content:(w=e(p))==null?void 0:w.total_unseen_messages},{default:i(()=>[ut]),_:1},8,["content"])):(o(),$("span",dt,"Inbox"))],2)]}),_:1},8,["to"]),r(l,{to:`/projects/${e(s)}/team`},{default:i(()=>[h("span",{class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/team`}])},"Your Team",2)]),_:1},8,["to"]),r(l,{to:`/projects/${e(s)}/marketplace`},{default:i(()=>[h("span",{class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(s)}/marketplace`}])},"Marketplace",2)]),_:1},8,["to"])])):M("",!0),r(Oe),e(b)&&((O=e(p))!=null&&O.bucks_share)?(o(),$("span",vt,[e(a).isAdmin||e(a).isManager?(o(),$("span",pt,[r(l,{to:`/projects/${e(s)}/bucks`},{default:i(()=>{var x;return[S(" Darby Bucks "),h("span",mt,"$"+C((x=e(p))==null?void 0:x.bucks_share_amount),1)]}),_:1},8,["to"])])):(o(),$("span",ft,[r(l,{to:`/projects/${e(s)}/bucks?tab=manage-bucks`},{default:i(()=>{var x;return[S(" Earned Bucks "),h("span",gt,"$"+C((x=e(p))==null?void 0:x.bucks_earnings),1)]}),_:1},8,["to"])]))])):M("",!0)])]}),default:i(()=>[r(d,{ref_key:"refLoadingIndicator",ref:u},null,512),r(m,null,{default:i(({Component:L})=>[(o(),v(Be,{timeout:0,onFallback:g[1]||(g[1]=O=>n.value=!0),onResolve:g[2]||(g[2]=O=>n.value=!1)},{default:i(()=>[(o(),v(N(L)))]),_:2},1024))]),_:1})]),_:1},8,["nav-items"])}}},$t=z(ht,[["__scopeId","data-v-9e35ac78"]]);export{$t as default};
