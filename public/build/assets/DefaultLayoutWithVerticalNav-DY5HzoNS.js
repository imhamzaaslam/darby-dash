import{_ as de}from"./AppLoadingIndicator-Q0Z3LAGg.js";import{_ as W,R as ne,U as x,T as se,r as j,W as ve,X as pe,Y as ie,l as G,j as z,w as E,a as F,o as s,f as u,e as i,d as y,z as D,b as l,n as e,P as H,p as g,I as L,h as b,q as V,J as T,y as A,Z as me,c as $,F as Y,i as U,x as w,$ as oe,a0 as re,k as fe,a1 as ge,m as K,a2 as P,a3 as he,s as q,t as I,v as S,a4 as le,a5 as ye,a6 as be,a7 as ke,a8 as _e,A as Ne,B as xe,a9 as J,aa as $e,E as Ve,ab as Ce,ac as Q,V as X,ad as we,L as Ie,M as je,N as Z,O as ee,ae as Se,Q as Ae,S as Re}from"./main-BVw4eaIE.js";import Me from"./NavbarThemeSwitcher-sZG8RjtM.js";import Le from"./NavBarNotifications-HII9-YsJ.js";import Te from"./UserProfile-CYYLhQaF.js";import{c as Oe,a as ce}from"./casl-8qcCwMbk.js";const Be=ne({name:"TransitionExpand",setup(t,{slots:o}){const p=a=>{const n=getComputedStyle(a).width;a.style.width=n,a.style.position="absolute",a.style.visibility="hidden",a.style.height="auto";const k=getComputedStyle(a).height;a.style.width="",a.style.position="",a.style.visibility="",a.style.height="0px",getComputedStyle(a).height,requestAnimationFrame(()=>{a.style.height=k})},c=a=>{a.style.height="auto"},d=a=>{const n=getComputedStyle(a).height;a.style.height=n,getComputedStyle(a).height,requestAnimationFrame(()=>{a.style.height="0px"})};return()=>x(x(se),{name:"expand",onEnter:p,onAfterEnter:c,onLeave:d},()=>{var a;return(a=o.default)==null?void 0:a.call(o)})}}),Pe=W(Be,[["__scopeId","data-v-22ff91fc"]]),Ee=t=>(oe("data-v-18c4988b"),t=t(),re(),t),qe={class:"nav-header"},Ge=Ee(()=>y("div",{class:"vertical-nav-items-shadow"},null,-1)),Fe={__name:"VerticalNav",props:{tag:{type:null,required:!1,default:"aside"},navItems:{type:null,required:!0},isOverlayNavActive:{type:Boolean,required:!0},toggleIsOverlayNavActive:{type:Function,required:!0}},setup(t){const o=t,p=j(),c=ve(p);pe(ie,c);const d=G(),a=h=>"heading"in h?Je:"children"in h?We:ue,n=z();E(()=>n.name,()=>{o.toggleIsOverlayNavActive(!1)});const k=j(!1),m=h=>k.value=h,R=h=>{k.value=h.target.scrollTop>0},_=d.isVerticalNavMini(c);return(h,r)=>{const f=F("RouterLink");return s(),u(b(o.tag),{ref_key:"refNav",ref:p,class:w(["layout-vertical-nav",[{"overlay-nav":e(d).isLessThanOverlayNavBreakpoint,hovered:e(c),visible:t.isOverlayNavActive,scrolled:e(k)}]])},{default:i(()=>[y("div",qe,[D(h.$slots,"nav-header",{},()=>[l(f,{to:"/",class:"app-logo app-title-wrapper"},{default:i(()=>[e(_)?(s(),u(e(H),{key:1,nodes:e(g).app.logoHalf},null,8,["nodes"])):(s(),u(e(H),{key:0,nodes:e(g).app.logo},null,8,["nodes"]))]),_:1}),L((s(),u(b(e(g).app.iconRenderer||"div"),V({class:["header-action d-none nav-unpin",e(d).isVerticalNavCollapsed&&"d-lg-block"]},e(g).icons.verticalNavUnPinned,{onClick:r[0]||(r[0]=v=>e(d).isVerticalNavCollapsed=!e(d).isVerticalNavCollapsed)}),null,16,["class"])),[[T,e(d).isVerticalNavCollapsed]]),L((s(),u(b(e(g).app.iconRenderer||"div"),V({class:["header-action d-none nav-pin",!e(d).isVerticalNavCollapsed&&"d-lg-block"]},e(g).icons.verticalNavPinned,{onClick:r[1]||(r[1]=v=>e(d).isVerticalNavCollapsed=!e(d).isVerticalNavCollapsed)}),null,16,["class"])),[[T,!e(d).isVerticalNavCollapsed]]),(s(),u(b(e(g).app.iconRenderer||"div"),V({class:"header-action d-lg-none"},e(g).icons.close,{onClick:r[2]||(r[2]=v=>t.toggleIsOverlayNavActive(!1))}),null,16))],!0)]),D(h.$slots,"before-nav-items",{},()=>[Ge],!0),l(f,{to:"/",class:"bottom-logo"},{default:i(()=>[e(_)?A("",!0):(s(),u(e(H),{key:0,nodes:e(g).app.watermarkLogo},null,8,["nodes"]))]),_:1}),D(h.$slots,"nav-items",{updateIsVerticalNavScrolled:m},()=>[(s(),u(e(me),{key:e(d).isAppRTL,tag:"ul",class:"nav-items",options:{wheelPropagation:!1},onPsScrollY:R},{default:i(()=>[(s(!0),$(Y,null,U(t.navItems,(v,O)=>(s(),u(b(a(v)),{key:O,item:v},null,8,["item"]))),128))]),_:1}))],!0)]),_:3},8,["class"])}}},De=W(Fe,[["__scopeId","data-v-18c4988b"]]),He={class:"nav-group-children"},We=Object.assign({name:"VerticalNavGroup"},{__name:"VerticalNavGroup",props:{item:{type:null,required:!0}},setup(t){const o=t,p=z(),c=fe(),d=G(),a=d.isVerticalNavMini(),n=ge(ie,j(!1)),k=j(!1),m=j(!1),R=r=>r.some(f=>{let v=P.value.includes(f.title);return"children"in f&&(v=R(f.children)||v),v}),_=r=>{r.forEach(f=>{"children"in f&&_(f.children),P.value=P.value.filter(v=>v!==f.title)})};E(()=>p.path,()=>{const r=K(o.item.children,c);m.value=r&&!d.isVerticalNavMini(n).value,k.value=r},{immediate:!0}),E(m,r=>{const f=P.value.indexOf(o.item.title);r&&f===-1?P.value.push(o.item.title):!r&&f!==-1&&(P.value.splice(f,1),_(o.item.children))},{immediate:!0}),E(P,r=>{if(r.at(-1)===o.item.title)return;const v=K(o.item.children,c);v||R(o.item.children)||(m.value=v,k.value=v)},{deep:!0}),E(d.isVerticalNavMini(n),r=>{m.value=r?!1:k.value});const h=he();return(r,f)=>e(Oe)(t.item)?(s(),$("li",{key:0,class:w(["nav-group",[{active:e(k),open:e(m),disabled:t.item.disable}]])},[y("div",{class:"nav-group-label",onClick:f[0]||(f[0]=v=>m.value=!e(m))},[(s(),u(b(e(g).app.iconRenderer||"div"),V(t.item.icon||e(g).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),(s(),u(b(e(h)?le:"div"),V({name:"transition-slide-x"},e(h)?void 0:{class:"d-flex align-center flex-grow-1"}),{default:i(()=>[L((s(),u(b(e(g).app.i18n.enable?"i18n-t":"span"),V(e(q)(t.item.title,"span"),{key:"title",class:"nav-item-title"}),{default:i(()=>[I(S(t.item.title),1)]),_:1},16)),[[T,!e(a)]]),t.item.badgeContent?L((s(),u(b(e(g).app.i18n.enable?"i18n-t":"span"),V({key:0},e(q)(t.item.badgeContent,"span"),{key:"badge",class:["nav-item-badge",t.item.badgeClass]}),{default:i(()=>[I(S(t.item.badgeContent),1)]),_:1},16,["class"])),[[T,!e(a)]]):A("",!0),L((s(),u(b(e(g).app.iconRenderer||"div"),V(e(g).icons.chevronRight,{key:"arrow",class:"nav-group-arrow"}),null,16)),[[T,!e(a)]])]),_:1},16))]),l(e(Pe),null,{default:i(()=>[L(y("ul",He,[(s(!0),$(Y,null,U(t.item.children,v=>(s(),u(b("children"in v?"VerticalNavGroup":e(ue)),{key:v.title,item:v},null,8,["item"]))),128))],512),[[T,e(m)]])]),_:1})],2)):A("",!0)}}),ze=ne({props:{navItems:{type:Array,required:!0},verticalNavAttrs:{type:Object,default:()=>({})}},setup(t,{slots:o}){const{width:p}=ye(),c=G(),d=j(!1),a=j(!1),n=be(d);return ke(d,a),E(p,()=>{!c.isLessThanOverlayNavBreakpoint&&a.value&&(a.value=!1)}),()=>{var B,N,C;const k=_e(t,"verticalNavAttrs"),{wrapper:m,wrapperProps:R,..._}=k.value,h=x(De,{isOverlayNavActive:d.value,toggleIsOverlayNavActive:n,navItems:t.navItems,..._},{"nav-header":()=>{var M;return(M=o["vertical-nav-header"])==null?void 0:M.call(o)},"before-nav-items":()=>{var M;return(M=o["before-vertical-nav-items"])==null?void 0:M.call(o)}}),r=x("header",{class:["layout-navbar",{"navbar-blur":c.isNavbarBlurEnabled}]},[x("div",{class:"navbar-content-container"},(B=o.navbar)==null?void 0:B.call(o,{toggleVerticalOverlayNavActive:n}))]),f=x("main",{class:"layout-page-content"},x("div",{class:"page-content-container"},(N=o.default)==null?void 0:N.call(o))),v=x("footer",{class:"layout-footer"},[x("div",{class:"footer-content-container"},(C=o.footer)==null?void 0:C.call(o))]),O=x("div",{class:["layout-overlay",{visible:a.value}],onClick:()=>{a.value=!a.value}});return x("div",{class:["layout-wrapper",...c._layoutClasses]},[m?x(m,R,{default:()=>h}):h,x("div",{class:"layout-content-wrapper"},[r,f,v]),O])}}}),ue={__name:"VerticalNavLink",props:{item:{type:null,required:!0}},setup(t){const p=G().isVerticalNavMini();return(c,d)=>e(ce)(t.item.action,t.item.subject)?(s(),$("li",{key:0,class:w(["nav-link",{disabled:t.item.disable}])},[(s(),u(b(t.item.to?"RouterLink":"a"),V(e(xe)(t.item),{class:{"router-link-active router-link-exact-active":e(Ne)(t.item,c.$router)}}),{default:i(()=>[(s(),u(b(e(g).app.iconRenderer||"div"),V(t.item.icon||e(g).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),l(le,{name:"transition-slide-x"},{default:i(()=>[L((s(),u(b(e(g).app.i18n.enable?"i18n-t":"span"),V({key:"title",class:"nav-item-title"},e(q)(t.item.title,"span")),{default:i(()=>[I(S(t.item.title),1)]),_:1},16)),[[T,!e(p)]]),t.item.badgeContent?L((s(),u(b(e(g).app.i18n.enable?"i18n-t":"span"),V({key:"badge",class:["nav-item-badge",t.item.badgeClass]},e(q)(t.item.badgeContent,"span")),{default:i(()=>[I(S(t.item.badgeContent),1)]),_:1},16,["class"])),[[T,!e(p)]]):A("",!0)]),_:1})]),_:1},16,["class"]))],2)):A("",!0)}},Ye={key:0,class:"nav-section-title"},Ue={class:"title-wrapper"},Je={__name:"VerticalNavSectionTitle",props:{item:{type:null,required:!0}},setup(t){const p=G().isVerticalNavMini();return(c,d)=>e(ce)(t.item.action,t.item.subject)?(s(),$("li",Ye,[y("div",Ue,[l(se,{name:"vertical-nav-section-title",mode:"out-in"},{default:i(()=>[(s(),u(b(e(p)?e(g).app.iconRenderer:e(g).app.i18n.enable?"i18n-t":"span"),V({key:e(p),class:e(p)?"placeholder-icon":"title-text"},{...e(g).icons.sectionTitlePlaceholder,...e(q)(t.item.heading,"span")}),{default:i(()=>[I(S(e(p)?null:t.item.heading),1)]),_:1},16,["class"]))]),_:1})])])):A("",!0)}},te=J().isAdmin,ae=J().isSuperAdmin,Ke=[{title:"Home",to:{name:"root"},icon:{icon:"tabler-align-box-bottom-center"}},ae&&{title:"Companies",icon:{icon:"tabler-users"},to:{name:"companies-list"}},!ae&&{title:"Projects",icon:{icon:"tabler-chart-histogram"},to:{name:"web-designs-list"}},te&&{title:"Members",icon:{icon:"tabler-users"},to:{name:"members-list"}},te&&{title:"Settings",icon:{icon:"tabler-settings"},children:[{title:"Manage Roles",to:"roles-setting"},{title:"Manage Templates",to:"templates-setting"},{title:"Manage Services",to:"services-setting"}]}],Qe=Ke.filter(Boolean),Xe=t=>(oe("data-v-83e0fb1e"),t=t(),re(),t),Ze={class:"d-flex h-100 align-center"},et={key:0},tt={class:"text-primary"},at={key:1},nt={class:"text-primary"},st={key:1,class:"d-none d-lg-flex align-center"},it=Xe(()=>y("span",{class:"inner-badge-text"},"Inbox",-1)),ot={key:1},rt={key:2,class:"text-h6 font-weight-bold me-4 d-none d-lg-flex"},lt={key:0},ct={class:"text-primary"},ut={key:1},dt={class:"text-primary"},vt={__name:"DefaultLayoutWithVerticalNav",setup(t){const o=j(!1),p=j(null),c=z(),d=$e(),a=J(),n=j(null);j(null),Ve(async()=>{await a.tenantInfo()}),Ce(()=>{n.value=c.params.id}),E([o,p],()=>{o.value&&p.value&&p.value.fallbackHandle(),!o.value&&p.value&&p.value.resolveHandle()},{immediate:!0});const k=Q(()=>{const R=c.name==="manage-templates",_=c.name==="manage-company-settings";return!(R||_)&&c.params.id!==void 0}),m=Q(()=>d.getProject);return(R,_)=>{const h=F("IconBtn"),r=F("RouterLink"),f=de,v=F("RouterView");return s(),u(e(ze),{"nav-items":e(Qe)},{navbar:i(({toggleVerticalOverlayNavActive:O})=>{var B;return[y("div",Ze,[l(h,{id:"vertical-nav-toggle-btn",class:"ms-n3 d-lg-none",onClick:N=>O(!0)},{default:i(()=>[l(X,{size:"26",icon:"tabler-menu-2"})]),_:2},1032,["onClick"]),l(Me),e(k)?(s(),u(h,{key:0,class:"ms-n1 d-lg-none",onClick:_[0]||(_[0]=we(()=>{},["prevent"]))},{default:i(()=>[l(X,{size:"26",icon:"tabler-dots-vertical"}),l(Ie,{activator:"parent",class:"d-lg-none","offset-y":""},{default:i(()=>[l(je,null,{default:i(()=>{var N;return[(s(!0),$(Y,null,U([{text:"Overview",route:`/projects/web-designs/${e(n)}`},{text:"Tasks",route:`/projects/${e(n)}/tasks/add`},{text:"Milestones",route:`/projects/${e(n)}/milestones`},{text:"Calendar",route:`/projects/${e(n)}/calendar`},{text:"Files",route:`/projects/${e(n)}/files`},{text:"Inbox",route:`/projects/${e(n)}/chat`},{text:"Your Team",route:`/projects/${e(n)}/team`},{text:"Marketplace",route:`/projects/${e(n)}/marketplace`}],C=>(s(),u(Z,{key:C.text},{default:i(()=>[l(r,{to:C.route},{default:i(()=>[l(ee,null,{default:i(()=>[I(S(C.text),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128)),(N=e(m))!=null&&N.bucks_share?(s(),u(Z,{key:0},{default:i(()=>[l(r,{to:e(a).isAdmin||e(a).isManager?`/projects/${e(n)}/bucks`:`/projects/${e(n)}/bucks?tab=manage-bucks`},{default:i(()=>[l(ee,null,{default:i(()=>{var C,M;return[e(a).isAdmin||e(a).isManager?(s(),$("span",et,[I(" Darby Bucks "),y("span",tt,"$"+S((C=e(m))==null?void 0:C.bucks_share_amount),1)])):(s(),$("span",at,[I(" Earned Bucks "),y("span",nt,"$"+S((M=e(m))==null?void 0:M.bucks_earnings),1)]))]}),_:1})]),_:1},8,["to"])]),_:1})):A("",!0)]}),_:1})]),_:1})]),_:1})):A("",!0),e(k)?(s(),$("div",st,[l(r,{to:`/projects/web-designs/${e(n)}`},{default:i(()=>[y("span",{class:w(["text-h6 ms-3 me-5 inner-badge-text",{"text-primary":e(c).path===`/projects/web-designs/${e(n)}`}])},"Overview",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(n)}/tasks/add`},{default:i(()=>[y("span",{class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(n)}/tasks/add`}])}," Tasks ",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(n)}/milestones`,class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(n)}/milestones`}])},{default:i(()=>[I(" Milestones ")]),_:1},8,["to","class"]),l(r,{to:`/projects/${e(n)}/calendar`},{default:i(()=>[y("span",{class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(n)}/calendar`}])},"Calendar",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(n)}/files`},{default:i(()=>[y("span",{class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(n)}/files`}])},"Files",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(n)}/chat`},{default:i(()=>{var N,C;return[y("span",{class:w(["text-h6 me-5 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(n)}/chat`}])},[(N=e(m))!=null&&N.total_unseen_messages?(s(),u(Se,{key:0,class:"new-badge",color:"error",content:(C=e(m))==null?void 0:C.total_unseen_messages},{default:i(()=>[it]),_:1},8,["content"])):(s(),$("span",ot,"Inbox"))],2)]}),_:1},8,["to"]),l(r,{to:`/projects/${e(n)}/team`},{default:i(()=>[y("span",{class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(n)}/team`}])},"Your Team",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(n)}/marketplace`},{default:i(()=>[y("span",{class:w(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(n)}/marketplace`}])},"Marketplace",2)]),_:1},8,["to"])])):A("",!0),l(Ae),e(k)&&((B=e(m))!=null&&B.bucks_share)?(s(),$("span",rt,[e(a).isAdmin||e(a).isManager?(s(),$("span",lt,[l(r,{to:`/projects/${e(n)}/bucks`},{default:i(()=>{var N;return[I(" Darby Bucks "),y("span",ct,"$"+S((N=e(m))==null?void 0:N.bucks_share_amount),1)]}),_:1},8,["to"])])):(s(),$("span",ut,[l(r,{to:`/projects/${e(n)}/bucks?tab=manage-bucks`},{default:i(()=>{var N;return[I(" Earned Bucks "),y("span",dt,"$"+S((N=e(m))==null?void 0:N.bucks_earnings),1)]}),_:1},8,["to"])]))])):A("",!0),l(Le,{class:"me-2"}),l(Te)])]}),default:i(()=>[l(f,{ref_key:"refLoadingIndicator",ref:p},null,512),l(v,null,{default:i(({Component:O})=>[(s(),u(Re,{timeout:0,onFallback:_[1]||(_[1]=B=>o.value=!0),onResolve:_[2]||(_[2]=B=>o.value=!1)},{default:i(()=>[(s(),u(b(O)))]),_:2},1024))]),_:1})]),_:1},8,["nav-items"])}}},bt=W(vt,[["__scopeId","data-v-83e0fb1e"]]);export{bt as default};
