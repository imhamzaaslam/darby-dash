import{_ as fe}from"./AppLoadingIndicator-3l1O9XC-.js";import{_ as z,R as oe,U as N,T as re,r as A,W as ge,X as he,Y as le,l as q,j as F,w as B,a as D,o,f as u,e as n,d as y,z as H,b as l,n as e,c as $,v as C,p as f,Z as ye,$ as be,I as T,h as _,q as V,J as L,P as ce,y as M,a0 as ke,F as Y,i as J,x as I,a1 as ue,a2 as de,k as _e,a3 as xe,m as ee,a4 as O,a5 as Ne,s as E,t as S,a6 as ve,a7 as $e,a8 as Ve,a9 as U,aa as Ce,ab as we,A as je,B as Ie,ac as W,ad as Se,E as Ae,ae as Re,V as te,af as Me,L as Te,M as Le,N as ae,O as ne,ag as Oe,Q as Be,S as Pe}from"./main-hUpzjCeA.js";import{c as Ee,a as pe}from"./casl-CFD1vvLX.js";import qe from"./NavbarThemeSwitcher-D7dnz11C.js";import Ge from"./NavBarNotifications-BfFWEt2T.js";import De from"./UserProfile-O4zcFyoE.js";const Fe=oe({name:"TransitionExpand",setup(t,{slots:s}){const p=a=>{const i=getComputedStyle(a).width;a.style.width=i,a.style.position="absolute",a.style.visibility="hidden",a.style.height="auto";const k=getComputedStyle(a).height;a.style.width="",a.style.position="",a.style.visibility="",a.style.height="0px",getComputedStyle(a).height,requestAnimationFrame(()=>{a.style.height=k})},c=a=>{a.style.height="auto"},d=a=>{const i=getComputedStyle(a).height;a.style.height=i,getComputedStyle(a).height,requestAnimationFrame(()=>{a.style.height="0px"})};return()=>N(N(re),{name:"expand",onEnter:p,onAfterEnter:c,onLeave:d},()=>{var a;return(a=s.default)==null?void 0:a.call(s)})}}),We=z(Fe,[["__scopeId","data-v-22ff91fc"]]),He=t=>(ue("data-v-4baa461d"),t=t(),de(),t),Ue={class:"nav-header"},ze={key:0,class:"app-title text-h4 text-primary text-truncate",style:{"max-width":"200px"}},Ye=He(()=>y("div",{class:"vertical-nav-items-shadow"},null,-1)),Je={__name:"VerticalNav",props:{tag:{type:null,required:!1,default:"aside"},navItems:{type:null,required:!0},isOverlayNavActive:{type:Boolean,required:!0},toggleIsOverlayNavActive:{type:Function,required:!0}},setup(t){const s=t,p=A(),c=ge(p);he(le,c);const d=q(),a=g=>"heading"in g?at:"children"in g?Xe:me,i=F();B(()=>i.name,()=>{s.toggleIsOverlayNavActive(!1)});const k=A(!1),h=g=>k.value=g,w=g=>{k.value=g.target.scrollTop>0},b=d.isVerticalNavMini(c);return(g,r)=>{const m=D("RouterLink");return o(),u(_(s.tag),{ref_key:"refNav",ref:p,class:I(["layout-vertical-nav pt-3",[{"overlay-nav":e(d).isLessThanOverlayNavBreakpoint,hovered:e(c),visible:t.isOverlayNavActive,scrolled:e(k)}]])},{default:n(()=>[y("div",Ue,[H(g.$slots,"nav-header",{},()=>[l(m,{to:"/",class:"app-logo app-title-wrapper"},{default:n(()=>[e(b)?(o(),u(ye,{key:1,color:"primary",variant:"tonal",class:"app-title-short",size:"40"},{default:n(()=>[y("span",null,C(("avatarText"in g?g.avatarText:e(be))(e(f).app.title)),1)]),_:1})):(o(),$("span",ze,C(e(f).app.title),1))]),_:1}),T((o(),u(_(e(f).app.iconRenderer||"div"),V({class:["header-action d-none nav-unpin",e(d).isVerticalNavCollapsed&&"d-lg-block"]},e(f).icons.verticalNavUnPinned,{onClick:r[0]||(r[0]=v=>e(d).isVerticalNavCollapsed=!e(d).isVerticalNavCollapsed)}),null,16,["class"])),[[L,e(d).isVerticalNavCollapsed]]),T((o(),u(_(e(f).app.iconRenderer||"div"),V({class:["header-action d-none nav-pin",!e(d).isVerticalNavCollapsed&&"d-lg-block"]},e(f).icons.verticalNavPinned,{onClick:r[1]||(r[1]=v=>e(d).isVerticalNavCollapsed=!e(d).isVerticalNavCollapsed)}),null,16,["class"])),[[L,!e(d).isVerticalNavCollapsed]]),(o(),u(_(e(f).app.iconRenderer||"div"),V({class:"header-action d-lg-none"},e(f).icons.close,{onClick:r[2]||(r[2]=v=>t.toggleIsOverlayNavActive(!1))}),null,16))],!0)]),H(g.$slots,"before-nav-items",{},()=>[Ye],!0),l(m,{to:"/",class:"bottom-logo"},{default:n(()=>[e(b)?M("",!0):(o(),u(e(ce),{key:0,nodes:e(f).app.watermarkLogo},null,8,["nodes"]))]),_:1}),H(g.$slots,"nav-items",{updateIsVerticalNavScrolled:h},()=>[(o(),u(e(ke),{key:e(d).isAppRTL,tag:"ul",class:"nav-items",options:{wheelPropagation:!1},onPsScrollY:w},{default:n(()=>[(o(!0),$(Y,null,J(t.navItems,(v,R)=>(o(),u(_(a(v)),{key:R,item:v},null,8,["item"]))),128))]),_:1}))],!0)]),_:3},8,["class"])}}},Ke=z(Je,[["__scopeId","data-v-4baa461d"]]),Qe={class:"nav-group-children"},Xe=Object.assign({name:"VerticalNavGroup"},{__name:"VerticalNavGroup",props:{item:{type:null,required:!0}},setup(t){const s=t,p=F(),c=_e(),d=q(),a=d.isVerticalNavMini(),i=xe(le,A(!1)),k=A(!1),h=A(!1),w=r=>r.some(m=>{let v=O.value.includes(m.title);return"children"in m&&(v=w(m.children)||v),v}),b=r=>{r.forEach(m=>{"children"in m&&b(m.children),O.value=O.value.filter(v=>v!==m.title)})};B(()=>p.path,()=>{const r=ee(s.item.children,c);h.value=r&&!d.isVerticalNavMini(i).value,k.value=r},{immediate:!0}),B(h,r=>{const m=O.value.indexOf(s.item.title);r&&m===-1?O.value.push(s.item.title):!r&&m!==-1&&(O.value.splice(m,1),b(s.item.children))},{immediate:!0}),B(O,r=>{if(r.at(-1)===s.item.title)return;const v=ee(s.item.children,c);v||w(s.item.children)||(h.value=v,k.value=v)},{deep:!0}),B(d.isVerticalNavMini(i),r=>{h.value=r?!1:k.value});const g=Ne();return(r,m)=>e(Ee)(t.item)?(o(),$("li",{key:0,class:I(["nav-group",[{active:e(k),open:e(h),disabled:t.item.disable}]])},[y("div",{class:"nav-group-label",onClick:m[0]||(m[0]=v=>h.value=!e(h))},[(o(),u(_(e(f).app.iconRenderer||"div"),V(t.item.icon||e(f).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),(o(),u(_(e(g)?ve:"div"),V({name:"transition-slide-x"},e(g)?void 0:{class:"d-flex align-center flex-grow-1"}),{default:n(()=>[T((o(),u(_(e(f).app.i18n.enable?"i18n-t":"span"),V(e(E)(t.item.title,"span"),{key:"title",class:"nav-item-title"}),{default:n(()=>[S(C(t.item.title),1)]),_:1},16)),[[L,!e(a)]]),t.item.badgeContent?T((o(),u(_(e(f).app.i18n.enable?"i18n-t":"span"),V({key:0},e(E)(t.item.badgeContent,"span"),{key:"badge",class:["nav-item-badge",t.item.badgeClass]}),{default:n(()=>[S(C(t.item.badgeContent),1)]),_:1},16,["class"])),[[L,!e(a)]]):M("",!0),T((o(),u(_(e(f).app.iconRenderer||"div"),V(e(f).icons.chevronRight,{key:"arrow",class:"nav-group-arrow"}),null,16)),[[L,!e(a)]])]),_:1},16))]),l(e(We),null,{default:n(()=>[T(y("ul",Qe,[(o(!0),$(Y,null,J(t.item.children,v=>(o(),u(_("children"in v?"VerticalNavGroup":e(me)),{key:v.title,item:v},null,8,["item"]))),128))],512),[[L,e(h)]])]),_:1})],2)):M("",!0)}}),Ze=oe({props:{navItems:{type:Array,required:!0},verticalNavAttrs:{type:Object,default:()=>({})}},setup(t,{slots:s}){const{width:p}=$e(),c=q(),d=A(!1),a=A(!1),i=Ve(d),k=F(),h=U(()=>{const w=k.matched.some(g=>g.path.startsWith("/projects")),b=k.params.id;return w&&!!b});return Ce(d,a),B(p,()=>{!c.isLessThanOverlayNavBreakpoint&&a.value&&(a.value=!1)}),()=>{var K,Q,X,Z;const w=we(t,"verticalNavAttrs"),{wrapper:b,wrapperProps:g,...r}=w.value,m=N(Ke,{isOverlayNavActive:d.value,toggleIsOverlayNavActive:i,navItems:t.navItems,...r},{"nav-header":()=>{var P;return(P=s["vertical-nav-header"])==null?void 0:P.call(s)},"before-nav-items":()=>{var P;return(P=s["before-vertical-nav-items"])==null?void 0:P.call(s)}}),v=N("header",{class:["layout-navbar","logo-navbar",{"navbar-blur":c.isNavbarBlurEnabled}]},[N("div",{class:["navbar-content-container","logo-navbar-content-container"]},(K=s.logoNavbar)==null?void 0:K.call(s,{toggleVerticalOverlayNavActive:i}))]),R=h.value?N("header",{class:["layout-navbar","project-navbar"],style:{top:"70px !important"}},[N("div",{class:"navbar-content-container"},(Q=s.navbar)==null?void 0:Q.call(s))]):null,x=N("main",{class:"layout-page-content"},N("div",{class:"page-content-container"},(X=s.default)==null?void 0:X.call(s))),j=N("footer",{class:"layout-footer"},[N("div",{class:"footer-content-container"},(Z=s.footer)==null?void 0:Z.call(s))]),G=N("div",{class:["layout-overlay",{visible:a.value}],onClick:()=>{a.value=!a.value}});return N("div",{class:["layout-wrapper",...c._layoutClasses]},[b?N(b,g,{default:()=>m}):m,N("div",{class:"layout-content-wrapper"},[v,R,x,j]),G])}}}),me={__name:"VerticalNavLink",props:{item:{type:null,required:!0}},setup(t){const p=q().isVerticalNavMini();return(c,d)=>e(pe)(t.item.action,t.item.subject)?(o(),$("li",{key:0,class:I(["nav-link",{disabled:t.item.disable}])},[(o(),u(_(t.item.to?"RouterLink":"a"),V(e(Ie)(t.item),{class:{"router-link-active router-link-exact-active":e(je)(t.item,c.$router)}}),{default:n(()=>[(o(),u(_(e(f).app.iconRenderer||"div"),V(t.item.icon||e(f).verticalNav.defaultNavItemIconProps,{class:"nav-item-icon"}),null,16)),l(ve,{name:"transition-slide-x"},{default:n(()=>[T((o(),u(_(e(f).app.i18n.enable?"i18n-t":"span"),V({key:"title",class:"nav-item-title"},e(E)(t.item.title,"span")),{default:n(()=>[S(C(t.item.title),1)]),_:1},16)),[[L,!e(p)]]),t.item.badgeContent?T((o(),u(_(e(f).app.i18n.enable?"i18n-t":"span"),V({key:"badge",class:["nav-item-badge",t.item.badgeClass]},e(E)(t.item.badgeContent,"span")),{default:n(()=>[S(C(t.item.badgeContent),1)]),_:1},16,["class"])),[[L,!e(p)]]):M("",!0)]),_:1})]),_:1},16,["class"]))],2)):M("",!0)}},et={key:0,class:"nav-section-title"},tt={class:"title-wrapper"},at={__name:"VerticalNavSectionTitle",props:{item:{type:null,required:!0}},setup(t){const p=q().isVerticalNavMini();return(c,d)=>e(pe)(t.item.action,t.item.subject)?(o(),$("li",et,[y("div",tt,[l(re,{name:"vertical-nav-section-title",mode:"out-in"},{default:n(()=>[(o(),u(_(e(p)?e(f).app.iconRenderer:e(f).app.i18n.enable?"i18n-t":"span"),V({key:e(p),class:e(p)?"placeholder-icon":"title-text"},{...e(f).icons.sectionTitlePlaceholder,...e(E)(t.item.heading,"span")}),{default:n(()=>[S(C(e(p)?null:t.item.heading),1)]),_:1},16,["class"]))]),_:1})])])):M("",!0)}},se=W().isAdmin,nt=W().isSuperAdmin,ie=W().getCompanyUuid,st=[{title:"Home",to:{name:"root"},icon:{icon:"tabler-align-box-bottom-center"}},!nt&&{title:"Projects",icon:{icon:"tabler-chart-histogram"},to:{name:"web-designs-list"}},se&&{title:"Members",icon:{icon:"tabler-users"},to:{name:"members-list"}},se&&{title:"Settings",icon:{icon:"tabler-settings"},children:[ie&&{title:"Company Setting",to:{name:"manage-company-settings",params:{id:ie}}},{title:"Manage Roles",to:"roles-setting"},{title:"Manage Templates",to:"templates-setting"},{title:"Manage Services",to:"services-setting"}]}],it=st.filter(Boolean),ot=t=>(ue("data-v-18473e7b"),t=t(),de(),t),rt={class:"d-flex h-100 align-center"},lt={class:"d-flex h-100 align-center"},ct={key:0},ut={class:"text-primary"},dt={key:1},vt={class:"text-primary"},pt={key:1,class:"d-none d-lg-flex align-center"},mt=ot(()=>y("span",{class:"inner-badge-text"},"Inbox",-1)),ft={key:1},gt={key:2,class:"text-h6 font-weight-bold me-4 d-none d-lg-flex"},ht={key:0},yt={class:"text-primary"},bt={key:1},kt={class:"text-primary"},_t={__name:"DefaultLayoutWithVerticalNav",setup(t){const s=A(!1),p=A(null),c=F(),d=Se(),a=W(),i=A(null);A(null),Ae(async()=>{await a.tenantInfo()}),Re(()=>{i.value=c.params.id}),B([s,p],()=>{s.value&&p.value&&p.value.fallbackHandle(),!s.value&&p.value&&p.value.resolveHandle()},{immediate:!0});const k=U(()=>{const w=c.name==="manage-templates",b=c.name==="manage-company-settings";return!(w||b)&&c.params.id!==void 0}),h=U(()=>d.getProject);return(w,b)=>{const g=D("IconBtn"),r=D("RouterLink"),m=fe,v=D("RouterView");return o(),u(e(Ze),{"nav-items":e(it)},{logoNavbar:n(({toggleVerticalOverlayNavActive:R})=>[y("div",rt,[l(g,{id:"vertical-nav-toggle-btn",class:"ms-n3 d-lg-none",onClick:x=>R(!0)},{default:n(()=>[l(te,{size:"26",icon:"tabler-menu-2"})]),_:2},1032,["onClick"]),l(r,{to:"/",class:"app-logo app-title-wrapper"},{default:n(()=>[l(e(ce),{nodes:e(f).app.logo},null,8,["nodes"])]),_:1}),l(qe),l(Ge,{class:"me-2"}),l(De)])]),navbar:n(()=>{var R;return[y("div",lt,[e(k)?(o(),u(g,{key:0,class:"ms-n1 d-lg-none",onClick:b[0]||(b[0]=Me(()=>{},["prevent"]))},{default:n(()=>[l(te,{size:"26",icon:"tabler-dots-vertical"}),l(Te,{activator:"parent",class:"d-lg-none","offset-y":""},{default:n(()=>[l(Le,null,{default:n(()=>{var x;return[(o(!0),$(Y,null,J([{text:"Overview",route:`/projects/web-designs/${e(i)}`},{text:"Tasks",route:`/projects/${e(i)}/tasks/add`},{text:"Milestones",route:`/projects/${e(i)}/milestones`},{text:"Calendar",route:`/projects/${e(i)}/calendar`},{text:"Files",route:`/projects/${e(i)}/files`},{text:"Inbox",route:`/projects/${e(i)}/chat`},{text:"Your Team",route:`/projects/${e(i)}/team`},{text:"Marketplace",route:`/projects/${e(i)}/marketplace`}],j=>(o(),u(ae,{key:j.text},{default:n(()=>[l(r,{to:j.route},{default:n(()=>[l(ne,null,{default:n(()=>[S(C(j.text),1)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128)),(x=e(h))!=null&&x.bucks_share?(o(),u(ae,{key:0},{default:n(()=>[l(r,{to:e(a).isAdmin||e(a).isManager?`/projects/${e(i)}/bucks`:`/projects/${e(i)}/bucks?tab=manage-bucks`},{default:n(()=>[l(ne,null,{default:n(()=>{var j,G;return[e(a).isAdmin||e(a).isManager?(o(),$("span",ct,[S(" Darby Bucks "),y("span",ut,"$"+C((j=e(h))==null?void 0:j.bucks_share_amount),1)])):(o(),$("span",dt,[S(" Earned Bucks "),y("span",vt,"$"+C((G=e(h))==null?void 0:G.bucks_earnings),1)]))]}),_:1})]),_:1},8,["to"])]),_:1})):M("",!0)]}),_:1})]),_:1})]),_:1})):M("",!0),e(k)?(o(),$("div",pt,[l(r,{to:`/projects/web-designs/${e(i)}`},{default:n(()=>[y("span",{class:I(["text-h6 ms-3 me-5 inner-badge-text",{"text-primary":e(c).path===`/projects/web-designs/${e(i)}`}])},"Overview",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/tasks/add`},{default:n(()=>[y("span",{class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/tasks/add`}])}," Tasks ",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/milestones`,class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/milestones`}])},{default:n(()=>[S(" Milestones ")]),_:1},8,["to","class"]),l(r,{to:`/projects/${e(i)}/calendar`},{default:n(()=>[y("span",{class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/calendar`}])},"Calendar",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/files`},{default:n(()=>[y("span",{class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/files`}])},"Files",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/chat`},{default:n(()=>{var x,j;return[y("span",{class:I(["text-h6 me-5 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/chat`}])},[(x=e(h))!=null&&x.total_unseen_messages?(o(),u(Oe,{key:0,class:"new-badge",color:"error",content:(j=e(h))==null?void 0:j.total_unseen_messages},{default:n(()=>[mt]),_:1},8,["content"])):(o(),$("span",ft,"Inbox"))],2)]}),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/team`},{default:n(()=>[y("span",{class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/team`}])},"Your Team",2)]),_:1},8,["to"]),l(r,{to:`/projects/${e(i)}/marketplace`},{default:n(()=>[y("span",{class:I(["text-h6 me-8 inner-badge-text",{"text-primary":e(c).path===`/projects/${e(i)}/marketplace`}])},"Marketplace",2)]),_:1},8,["to"])])):M("",!0),l(Be),e(k)&&((R=e(h))!=null&&R.bucks_share)?(o(),$("span",gt,[e(a).isAdmin||e(a).isManager?(o(),$("span",ht,[l(r,{to:`/projects/${e(i)}/bucks`},{default:n(()=>{var x;return[S(" Darby Bucks "),y("span",yt,"$"+C((x=e(h))==null?void 0:x.bucks_share_amount),1)]}),_:1},8,["to"])])):(o(),$("span",bt,[l(r,{to:`/projects/${e(i)}/bucks?tab=manage-bucks`},{default:n(()=>{var x;return[S(" Earned Bucks "),y("span",kt,"$"+C((x=e(h))==null?void 0:x.bucks_earnings),1)]}),_:1},8,["to"])]))])):M("",!0)])]}),default:n(()=>[l(m,{ref_key:"refLoadingIndicator",ref:p},null,512),l(v,null,{default:n(({Component:R})=>[(o(),u(Pe,{timeout:0,onFallback:b[1]||(b[1]=x=>s.value=!0),onResolve:b[2]||(b[2]=x=>s.value=!1)},{default:n(()=>[(o(),u(_(R)))]),_:2},1024))]),_:1})]),_:1},8,["nav-items"])}}},jt=z(_t,[["__scopeId","data-v-18473e7b"]]);export{jt as default};
